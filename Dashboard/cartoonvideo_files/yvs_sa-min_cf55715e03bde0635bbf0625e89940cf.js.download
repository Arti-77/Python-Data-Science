/*
 library-search-assist @version @0.0.0-76@9I5STFHEC @published Thu Feb 05 2015 16:09:09 GMT-0800 (PST)*/
YUI.add("search-assist-advanced-suggestions-plugin",function(b){var g=function(){g.superclass.constructor.apply(this,arguments)},k=function(a){this.suggestionText=a.suggestionText;this.label=a.label;this._generateMarkup()},a=function(a){this.value=a.value;this.label=a.label;this._generateMarkup()};k.prototype={_generateMarkup:function(){this.markup='<span class="'+this.cssClass+'">'+this.label+"</span>"},toString:function(){return this.suggestionText},cssClass:"site suggestionToken"};a.prototype=
{_generateMarkup:function(){this.markup='<span class="'+this.cssClass+'">'+this.label+"</span>"},toString:function(){return""},onSubmit:function(a){a.target.evtFacade.target.ancestor("form").append('<input type="hidden" name="vl" value="'+this.value+'"/>');a.target.evtFacade.target.ancestor("form").append('<input type="hidden" name="fl" value="1"/>')},cssClass:"country suggestionToken"};var c={database:{french:new a({suggestionText:"",value:"lang_fr",label:"in French"}),ebay:new k({suggestionText:"site:ebay.com",
label:"Ebay.com"}),craigslist:new k({suggestionText:"site:craigslist.org",label:"Craigslist.org"}),amazon:new k({suggestionText:"site:amazon.com",label:"Amazon.com"}),zillow:new k({suggestionText:"site:zillow.com",label:"Zillow.com"}),cnn:new k({suggestionText:"site:cnn.com",label:"Cnn.com"}),mashable:new k({suggestionText:"site:mashable.com",label:"Mashable.com"}),reddit:new k({suggestionText:"site:reddit.com",label:"Reddit.com"})},getSuggestions:function(a){var c,d=b.Lang.trim(a).split(" "),l=d.length,
g={suggestions:[],text:""};for(a=0;l>a;a++)(c=this.database[d[a].toLowerCase()])&&(d.splice(a,1),l--,a--,g.suggestions.push(c));return g.text=d.join(" "),g}};b.mix(g,{NAME:"search-assist-advanced-suggestions-plugin",NS:"AdvancedSuggestions",ATTRS:{}});b.extend(g,b.Plugin.Base,{initializer:function(){b.log("instantiating the advanced Search plugin","debug");this.doAfter("suggest-markup-has-been-attached-to-DOM",this._prependAdvancedSuggestions);this.doAfter("zero-suggestions-rendered-to-DOM",this._prependAdvancedSuggestions)},
_prependAdvancedSuggestions:function(a){var d=this.get("host"),f=c.getSuggestions(a.query),l={markup:"",suggestionText:f.text+" ",prepend:!0},g=f.suggestions.length;for(a=0;g>a;a+=1){var k=f.suggestions[a];l.markup+=k.markup+" ";l.suggestionText+=k+" ";k.onSubmit&&d.on("search-assist-form-submit",b.bind(k.onSubmit,k))}f.suggestions.length&&(l.markup+=f.text,d.addSuggestion(l))}});b.AdvancedSuggestionsPlugin=g},"1.0.0",{requires:["plugin","base-pluginhost"]});
YUI.add("search-assist-aria-plugin",function(b){var g=function(){g.superclass.constructor.apply(this,arguments)};b.mix(g,{NAME:"search-assist-aria-plugin",NS:"aria",ATTRS:{suggestionBoxClosedText:{value:"Suggestion box closed"},newSuggestionsShownText:{setter:function(b){return b.trending?""+b.count+" new trending suggestions shown":""+b.count+" new suggestions shown"}},suggestionSelectedText:{setter:function(b){var a="";return b&&(a="suggestion selected, "+b+", press arrow-right key to autocomplete or, press enter to search"),
a}}}});b.extend(g,b.Plugin.Base,{initializer:function(){this.aria_plugin_subscr={};var g=this.get("host");b.log("instantiating the ARIA plugin #######################","debug");!1===g.get("quietMode")&&g.get("searchBox").setAttribute("aria-haspopup",!0);this.aria_plugin_subscr.SA_ARIA_EVT_SUGGEST_MARKUP_RENDERED=this.doAfter("suggest-markup-has-been-attached-to-DOM",this._handleTrayHasBeenRendered);this.aria_plugin_subscr.EVT_SUGGESTIONS_HAS_BEEN_REMOVED=this.doAfter("search-assist-tray-removed",
this._handleTrayHasBeenRemoved);this.aria_plugin_subscr.EVT_SUGGESTION_SELECTED=this.doAfter("search-assist-suggestion-selected",this._handleSuggestionSelected);g=this._liveRegion=b.Node.create('<div role="status" class="sa-aria-live-region" aria-live="polite"></div>');this.aria_plugin_subscr.NODE_LIVE_REGION=g;g.setStyles({position:"absolute",left:"-9999px"});b.one("body").append(g)},_handleTrayHasBeenRemoved:function(){this._liveRegion&&(this._liveRegion.setContent("<p>"+this.get("suggestionBoxClosedText")+
"</p>"),this._liveRegion.setAttribute("aria-expanded","false"));document.body.className=document.body.className.replace(/\btyping\b/g,"")},_handleTrayHasBeenRendered:function(g){var a,c,d=this.get("host").get("tray"),e=d.Node;d=d.len;e&&(a=e.all("> ul"),c=e.all("> ul *"),b.Lang.isNumber(d)?(g.trending?(this.set("newSuggestionsShownText",{count:d,trending:!0}),this._liveRegion.setContent("<p>"+this.get("newSuggestionsShownText")+"</p>")):(this.set("newSuggestionsShownText",{count:d,trending:!1}),this._liveRegion.setContent("<p>"+
this.get("newSuggestionsShownText")+"</p>")),this._liveRegion.setAttribute("aria-expanded","true")):this._liveRegion.setAttribute("aria-expanded","false"),a.each(function(a){a.setAttribute("role","listbox")}),c.each(function(a){a.setAttribute("role","option")}));document.body.className+=" typing"},_handleSuggestionSelected:function(b){this._liveRegion&&b.suggestion&&(this.set("suggestionSelectedText",b.suggestion),this._liveRegion.setContent("<p>"+this.get("suggestionSelectedText")+"</p>"))},destroy:function(){var g,
a=this.aria_plugin_subscr;if(a)for(g in a)a.hasOwnProperty(g)&&(b.log("aria: unplugging "+g,"debug"),b.Lang.isFunction(a[g].purge)&&a[g].purge(),b.Lang.isFunction(a[g].detach)&&a[g].detach(),b.Lang.isFunction(a[g].remove)&&a[g].remove(),delete a[g])}});b.namespace("SEARCHASSIST").AriaPlugin=g},"1.0.0",{requires:["plugin","base-pluginhost"]});
YUI.add("search-assist-client",function(b,g){var k="client";k=function(){k.superclass.constructor.apply(this,arguments)};b.mix(k,{NAME:"Sa-Client",ATTRS:{}});b.SEARCHASSIST.CLIENT=b.Base.create(k,b.SEARCHASSIST.CORE,[b.SEARCHASSIST.TRAY,b.SEARCHASSIST.MOBILE,b.SEARCHASSIST.NAVIGATE,b.SEARCHASSIST.LINKTRACK],{submitListeners:[],clientInit:function(){this.publishClientEvts()},initializer:function(a){var c=this.get("searchBox");b.log("instantiating CLIENT","debug",g);this.get("quietMode")||this.clientInit(a);
this._confidence=0;this._prevSuggestion="";this._confidenceCounter=0;c&&c.hasAttribute("autofocus")&&c.focus()},setEventsForFakeBox:function(){var a=this,c=this.get("searchBox"),d=this._allSubscr||{};d._srchNodeKeyDownFakeBox=c.on("keydown",function(c){var d,e,g;!a.get("fakeBoxNode").get("value")||9!==c.keyCode&&39!==c.keyCode||(d=a.getQuery(),a.logAutoCompletion(d,a.get("fakeBoxNode").get("value"),1));a.get("fakeBox")&&a.get("fakeBox").autoCompleteOnReturnKey&&13===c.keyCode&&a.get("fakeBoxNode").get("value")&&
a.get("searchBox").set("value",a.get("fakeBoxNode").get("value"));b.UA.webkit&&13===c.keyCode&&a.get("fakeBox")&&(e=a.get("fakeBoxNode"),g=b.one("#fbdum"),e&&e.remove(),g&&g.remove())});d._srchNodeKeyUpFakeBox=c.on("keyup",function(c){b.UA.webkit&&13===c.keyCode&&a.get("fakeBox")&&(a.get("fakeBoxNode")||a.get("ieTillEight")||a.initFakeBoxNode());40!==c.keyCode&&38!==c.keyCode&&39!==c.keyCode&&37!==c.keyCode&&9!==c.keyCode||a.resetFBox()});b.one("#fbdum").on("click",function(){a.resetFBox();c.focus()});
this.on("zero-suggestions-rendered-to-DOM",function(){a.resetFBox()});this.on("suggest-markup-has-been-attached-to-DOM",function(c){var b=c.firstSuggestion;c=c.query;var d=this.get("fakeBoxNode");return d&&d.get("value")&&0!==d.get("value").indexOf(c,0)&&a.resetFBox(),""===c||a._prevSuggestion!==b.toLowerCase()?void a.resetFBox():void 0});this.on("search-assist-new-confidence",function(c){""!==c.query&&(a.ghost&&a.ghost.cancel(),a.ghost=b.later(400,this,function(){a.ghostAutoComplete(c)}))});c.on("click",
function(){a.resetFBox()});this.get("ieTillEight")||c.get("parentNode").on("click",function(){c.focus()})},initFakeBoxNode:function(){var a=this.get("searchBox");var c="";var b=this.get("fakeBox").fakeBoxHintText;this.get("fakeBox").fakeBoxHint&&b&&0<b.length&&(c='<span id="fakeBoxHint" class="fakeBoxHint">'+b+"</span>");a.get("parentNode").append('<input id="fakeBox"type="text" class="fakebox" aria-hidden="true" autocomplete="off" autocorrect="off" dir="ltr" />');a.get("parentNode").append('<div id="fbdum" style="position:absolute; left:0; right:0; top:0; bottom:0;z-index:-1"></div>');
c&&a.get("parentNode").append(c);c=this.get("fakeBoxNode");c.setStyles({"border-radius":a.getStyle("border-radius"),margin:a.getStyle("margin"),fontSize:a.getStyle("fontSize"),fontFamily:a.getStyle("fontFamily"),paddingLeft:a.getStyle("paddingLeft"),paddingRight:a.getStyle("paddingRight"),paddingTop:a.getStyle("paddingTop"),paddingBottom:a.getStyle("paddingBottom"),marginLeft:a.getStyle("marginLeft"),marginTop:a.getStyle("marginTop"),marginBottom:a.getStyle("marginBottom"),marginRight:a.getStyle("marginRight"),
borderLeftWidth:a.getStyle("borderLeftWidth"),borderRightWidth:a.getStyle("borderRightWidth"),borderTopWidth:a.getStyle("borderTopWidth"),borderBottomWidth:a.getStyle("borderBottomWidth"),borderLeftStyle:a.getStyle("borderLeftStyle"),borderRightStyle:a.getStyle("borderRightStyle"),borderTopStyle:a.getStyle("borderTopStyle"),borderBottomStyle:a.getStyle("borderBottomStyle"),borderLeftColor:a.getStyle("borderLeftColor"),borderRightColor:a.getStyle("borderRightColor"),borderTopColor:a.getStyle("borderTopColor"),
borderBottomColor:a.getStyle("borderBottomColor"),zIndex:"-1"});c.blur();c.setAttribute("disabled",!0);c.setAttribute("tabindex","-1");a.setStyle("backgroundColor","transparent");a.setAttribute("onfocus","this.value = this.value;")},initGhostBox:function(){this.get("ieTillEight")||this.get("fakeBoxNode")||(this.initFakeBoxNode(),this.setEventsForFakeBox())},initSpellCheck:function(){var a=this.get("searchBox");a.get("parentNode").append('<div id="spellCheckBox"></div>');var c=this.get("spellCheckNode");
c.setStyles({height:a.getStyle("height"),fontSize:a.getStyle("font-size"),paddingLeft:a.getStyle("padding-left"),fontFamily:a.getStyle("font-family"),margin:a.getStyle("margin"),fontWeight:a.getStyle("font-weight"),lineHeight:a.getStyle("height"),letterSpacing:a.getStyle("letter-spacing")});c.blur();c.setAttribute("disabled",!0);c.setAttribute("tabindex","-1");a.setStyle("backgroundColor","transparent");a.setAttribute("onfocus","this.value = this.value;")},initConfidence:function(){var a=this;this.on("suggest-markup-has-been-attached-to-DOM",
function(c){var d=c.firstSuggestion,e=c.query;d&&e&&0===d.toLowerCase().indexOf(e.toLowerCase(),0)?(a._confidence=10-(d.length-e.length)/d.length*10,a._prevSuggestion===d.toLowerCase()?10>=a._confidenceCounter&&(a._confidenceCounter+=1):a._confidenceCounter=0,0<a._confidenceCounter&&(a._confidence+=a._confidenceCounter,10<=a._confidence&&(a._confidence=10))):(a._confidenceCounter=0,a._confidence=0);d&&(a._prevSuggestion=d.toLowerCase());c._confidence=a._confidence;b.log("confidence of suggestion close to query: "+
a._confidence,"debug");a.fire("search-assist-new-confidence",c)})},adjustCase:function(a,c){return a&&c?a+c.substr(a.length):""},spellCheck:function(a){var c,d=this.get("spellCheckNode"),e=this.getQuery(),f="[]",l=[],h=0;if(0===e.length)return void this.clearSpellCheck();if(a.spchk){b.log("Performing spell check","debug",g);try{if(f=b.JSON.parse(a.spchk),0!==f.length%2)return void this.clearSpellCheck();for(c=0;c<f.length;c+=2)l.push(e.substring(h,f[c])),h=f[c],l.push('<span class="spellcheck">'),
l.push(e.substring(h,f[c+1]+1)),l.push("</span>"),h=f[c+1]+1;l.push(e.substring(h));l=l.join("");d.setHTML(l)}catch(m){this.clearSpellCheck(),b.log("Failed to parse spell check object","debug",g)}}else this.clearSpellCheck()},clearSpellCheck:function(){this.get("spellCheckNode").setHTML("")},ghostAutoComplete:function(a){var c,d,e,f,l=this.get("fakeBoxNode"),h=this.get("fakeBoxHintNode"),m=this.getQuery(),t=m.toLowerCase(),k=20;return d=this._queryWidth,e=this.get("searchBox").get("clientWidth")-
this._sbxPadLeftInt,d>e-k?(b.log("textWidth:"+d+"greater than sbxWidth:"+e,"debug",g),void this.resetFBox()):(h&&(k=h.get("offsetWidth")+100),f=e-d,c=a.firstSuggestion,void(l&&""!==t&&!this.isTrayTypeTrending()&&4<this._confidence?(l.set("value",c),c=this.adjustCase(m,c),l.set("value",c),this.fire("search-assist-ghost-box-rendered",a),c!==this.get("searchBox").get("value")&&this.resetTabTrack(),h&&(this._firsttimehint?k>f&&this.resetFBoxHint(!0):f>=k&&(h.addClass("show-fake-box-hint"),this._firsttimehint=
b.later(5E3,this,function(){h.removeClass("show-fake-box-hint")})))):this.resetFBox()))},resetFBoxHint:function(a){var c=this.get("fakeBoxNode"),b=this.get("fakeBoxHintNode");c&&b&&this._firsttimehint&&(this._firsttimehint.cancel(),b.removeClass("show-fake-box-hint"),a||(this._firsttimehint=!1))},resetFBox:function(){var a=this.get("fakeBoxNode");a&&(a.set("value",""),a.blur())},registerBoxEvents:function(){var a,c=this,d=c.get("searchBox"),e=this,f=this,l=this,h=c.get("currentDevice"),m=this._allSubscr;
c.get("spellCheck")&&this.initSpellCheck();"desktop"===h&&c.get("fakeBox")&&this.initGhostBox();"desktop"===h&&this.initConfidence();d?(b.log("searchNode is "+d,"debug",g),m._clientSrchNodeOnClick=d.on("click",function(a){b.log("click caught on searchnode","debug",g);c.get("mobileExpandMode")&&(a.stopPropagation(),a.preventDefault());f.handleEventOnSearchBox(a,"click")}),this.get("gecko")&&(b.log("gecko user agent..","degug",g),a=function(){return e._geckoGeneralState?void(e._geckoGeneralState=!1):
(e.fireInTheHole(),void(e._geckoGeneralState=!1))},m._clientSrchValChangeGecko=d.on("valueChange",function(c){var d,f;return e._grog&&e._grog.cancel(),e._geckoGeneralState?(e._geckoGeneralState=!1,e._valueChangeFail&&e._valueChangeFail.cancel(),void(e._valueChangeFail=b.later(100,this,function(){e._geckoCaughtKeyUp?e._geckoCaughtKeyUp=!1:38!==e._geckoCharCodeOnKeyDown&&40!==e._geckoCharCodeOnKeyDown&&e.fireInTheHole()}))):(d=e._geckoCharCodeOnKeyDown,f=38===d||40===d||39===d||37===d||8===d||32===
d,void(f||(e._grog=b.later(20,this,function(){a(c)}))))}),m._clientSrchKeyDownNativeGecko=d.on("keydown",function(a){e._geckoCharCodeOnKeyDown=a.charCode;e._geckoGeneralState=!0;e._geckoCaughtKeyUp=!1}),d.on("keyup",function(a){b.log("keyup: e.keyCode:"+a.keyCode,"debug");e._geckoGeneralState=!0;e._geckoCaughtKeyUp=!0})),m._clientSrchKeyUpNative=d.on("keyup",function(a){return 38===a.charCode||40===a.charCode||229===a.charCode||197===a.charCode?(b.log("arrow up / arrow down on keyup, as good as no keyup for native input case",
"debug"),void(e._nativeTrayKeyup=!1)):(e._nativeTrayKeyup=!0,void b.log("keyup: e.charCode:"+a.charCode,"debug"))}),m._clientSrchKeyDownNative=d.on("keydown",function(a){return e._nativeTrayKeyup=!1,b.log("keydown: e.keyCode:"+a.keyCode,"debug"),!0!==e._native||32!==a.charCode&&229!==a.charCode&&197!==a.charCode?(197===a.keyCode||229===a.keyCode?(b.log("keydown: input from native keyboard","debug"),e._native=!0):(e._native=!1,b.log("keydown: input from normal keyboard","debug")),void((40===a.charCode||
38===a.charCode)&&(e._d=this.get("value")))):void b.log("native is already true and keypressed was either space or native input key","debug")}),m._clientSrchValChangeNative=d.on("valueChange",function(a){b.log("valueChange:"+a.newVal,"debug");e._c=a.newVal;e._p=a.prevVal;e._s=this.get("value");e._native&&!1===e._nativeTrayKeyup&&(b.log("updating tray","debug"),b.log("_nativeTrayKeyup:"+e._nativeTrayKeyup,"debug"),b.log("_native:"+e._native,"debug"),e.fireInTheHole())}),m._clientSrchValChange=d.on("valueChange",
function(a){""===a.newVal&&c.isTrendingEnabled()&&l.fireInTheHole(a)}),m._clientSrchNodeOnValueChange=d.on("valuechange",function(a){b.log("event-value change was captured, self.keydown = "+l.getKeyDownState(),"debug",g);var c=e.getQuery();!1===l.getKeyDownState()&&""===c&&(b.log("firing query emptiness","debug",g),this.fire("query-emptiness"));b.log("query wasnt empty on event-value-change","debug",g);f.handleEventOnSearchBox(a,"valuechange")})):b.log("srchNode not found","error",g);window.YAHOO&&
window.YAHOO.CryptoOb&&c.addSubmitListener(window.YAHOO.CryptoOb)},publishClientEvts:function(){var a=this._allSubscr||{};b.log("publishing Client events","debug",g);b.log("registering box event","debug",g);this.registerBoxEvents();a._eventFormSubmit=this.publish("search-assist-form-submit",{defaultFn:b.bind("_defEvtFormSubmit",this)})},addSubmitListener:function(a){this.submitListeners.push(a)},handleSubmit:function(a,c){var b=!1;try{var e=a.submitListeners;for(a=0;a<e.length&&!b;a++)b=e[a].handleSubmit(c)}catch(f){}b||
c.submit()},_defEvtFormSubmit:function(){this.get("preventFormSubmit")?b.log("*****************NOT submitting form ********************","debug"):(b.log("*****************************submitting form*******************","debug"),this.handleSubmit(this,this.get("searchForm").getDOMNode()))},trimEndSpace:function(a){var c;if(a){a=a.replace(/^\s+/,"");for(c=a.length-1;0<=c;--c)if(/\S/.test(a.charAt(c))){a=a.substring(0,c+1);break}return a}return null},setSearchBoxVal:function(a){var c=this.get("searchBox");
c&&c.set("value",a)},handleEventOnSearchBox:function(a,c){var d=this.getQuery(),e=this.get("currentDevice"),f=this.isTrendingEnabled();if("desktop"===e){if("click"===c){if(b.log("desktop:event:"+c,"debug",g),this.isTrayOpen())return;""===d?f&&this.fireInTheHole(a):this.fireInTheHole(a)}if("keyup"===c)return b.log("desktop:event:"+c,"debug",g),void(""===d?f&&this.fireInTheHole(a):this.fireInTheHole(a));if("valuechange"===c||"query-emptiness"===c)return b.log("desktop:event:"+c,"debug",g),void(f?d&&
""!==d||(b.log("query is empty","debug",g),this.resetFBoxHint(!1),!1===this.getKeyDownState()&&(this.isTrayOpen()&&this.isTrayTypeTrending()?b.log("trending tray already open","debug",g):this.fireInTheHole(a))):d&&""!==d||(this.resetFBoxHint(!1),this.isTrayOpen()&&this.removeSuggestionsMarkup()))}"phone"!==e&&"tablet"!==e||this.handleMobileEventsOnSearchBox(a,c)},isStringEmpty:function(a){return a&&""!==a&&""!==this.trimEndSpace(a)?!1:!0},getQuery:function(){var a=this.get("searchBox"),c="";return a?
(c=a.get("value"),this.isStringEmpty(c)?"":c):void 0},addSuggestion:function(a){this.isRenderMode("tray")&&(a.mode="tray",this.addNewSuggestion(a))}})},"0.0.1",{requires:"search-assist search-assist-tray search-assist-mobile search-assist-linktrack search-assist-navigate cache base node-base jsonp json-stringify highlight-base event-valuechange escape event-outside event-flick node-style node-screen json-stringify cookie datasource datasource-jsonschema datasource-xmlschema datasource-arrayschema dataschema".split(" ")});
YUI.add("search-assist-config-panel-plugin",function(b,g){var k=function(){k.superclass.constructor.apply(this,arguments)};b.mix(k,{NAME:"search-assist-config-panel-plugin",NS:"configui",ATTRS:{title:{valueFn:function(){var a=b.Node.create('<div class="sa-config-panel-title"> SA Config panel</div>');return this.get("panel").append(a),a.setStyles({background:"#fff",color:"#000",display:"block","border-bottom":"1px solid #ccc"}),b.one(".sa-config-panel-title")}},panel:{valueFn:function(){var a=b.Node.create('<div class="sa-config-panel"></div>');
return a.setStyles({display:"block",border:"1px solid #ccc",padding:"10px","box-shadow":"1px 2px 10px #ccc","border-radius":"2px",background:"#fff"}),a.hide(),b.one("body").prepend(a),b.one(".sa-config-panel")}},origToShow:{valueFn:function(){return this.get("host").get("configPanel").toShow}},toShow:{valueFn:function(){var a=this.get("host").get("configPanel").toShow,c=[],d;b.log(a,"debug");var e=a.length;for(d=0;e>d;d+=1)c[a[d]]=!0;return b.log(c,"debug"),c}}}});b.extend(k,b.Plugin.Base,{initializer:function(){this.config_plugin_subscr=
{};b.log("instantiating the config plugin #######################","debug");this.isPanelHidden=!0;var a,c=this;var d=this.get("origToShow");var e=b.one(".sa-config-panel");b.Array.each(d,function(a){var b=c.createCheckBox(a);b&&c.setCheckBox(b,a)});this.config_plugin_subscr.configTitle=this.get("title");this.config_plugin_subscr.panelWrapper=a=b.Node.create('<div class="sa-config-panel-wrapper"></div>');this.config_plugin_subscr.wrench=d=b.Node.create('<div class="icon-wrench-wrapper"></div>');this.config_plugin_subscr.configPanel=
e;d.setHTML('<span><i class="icon-wrench">setting</i></span>');e.wrap(a);a.prepend(d);a.setStyles({display:"inline-block",position:"fixed",right:"0","z-index":"2000"});d.setStyles({display:"block",cursor:"pointer",padding:"5px",color:"#bbb","font-size":"1.0em","float":"right"});d.on("click",function(){c.isPanelHidden?(this.addClass("icon-wrench-wrapper-active"),e.show(),c.isPanelHidden=!1):(e.hide(),this.removeClass("icon-wrench-wrapper-active"),c.isPanelHidden=!0)})},createCheckBox:function(a){var c,
d,e=this.get("panel");return void 0===this.get("host").get(a)?(b.log('invalid param name provided in configpanel array ["'+a+'"]',"error"),null):this.get("toShow")[a]?(c=this.config_plugin_subscr.param=b.Node.create('<input type="checkbox" class="sa-config-panel-'+a+'"" name="'+a+'" value="0">'),e.append(c),d=b.one(".sa-config-panel-"+a),d.wrap('<div class="'+a+'-wrapper"></div>'),b.one("."+a+"-wrapper").append("<span>"+a+"</span>"),d):void 0},setCheckBox:function(a,c){var b=this.get("host");b.get(c)?
a.set("checked",!0):a.set("checked",!1);this.config_plugin_subscr=a.on("click",function(){b.set(c,this.get("checked"))})},destroy:function(){var a,c=this.config_plugin_subscr;if(c)for(a in c)c.hasOwnProperty(a)&&(b.log("unplugging "+a,"debug",g),b.Lang.isFunction(c[a].purge)&&c[a].purge(),b.Lang.isFunction(c[a].detach)&&c[a].detach(),b.Lang.isFunction(c[a].remove)&&c[a].remove(),delete c[a])}});b.SEARCHASSIST.SaConfigUIPlugin=k},"1.0.0",{requires:["plugin","base-pluginhost"]});
YUI.add("search-assist-core",function(b,g){var k="core";k=function(){k.superclass.constructor.apply(this,arguments)};b.mix(k,{NAME:"Sa-Core",ATTRS:{}});b.SEARCHASSIST.CORE=b.extend(k,b.SEARCHASSIST,{coreInit:function(){this.initCache();this._totalHitsToSuggestServer=this._totalHitsToCache=0;this.get("_externalDS")&&this.initExternalDS()},initializer:function(a){b.log("instantiating CORE","debug",g);this.get("quietMode")||this.coreInit(a)},initCache:function(){this.get("allowCache")&&(this.myCache=
new b.Cache({max:200,expires:8E5}),b.log("====Cache has been initialized====","debug",g))},flushCache:function(){this.get("allowCache")&&this.myCache&&(this.myCache.flush(),b.log("=====cache was flushed=====","debug",g))},initExternalDS:function(){var a=this.get("_externalDS"),c=a.url;this.validateSchema(a.params.schema);this._DS=new b.DataSource.Get({source:c})},validateSchema:function(a){try{if(!a)throw b.error("No schema specified");if(!a.resultListLocator)throw b.error("No resultListLocator field inside schema"+
b.JSON.stringify(a,null,"     "));if(!a.resultFields||!a.resultFields[0])return this._noFields=!0,void b.log("no resultFields found","warn");if(!a.resultFields[0].key)throw b.error('No "key" param inside schema for resultFields"'+b.JSON.stringify(a,null,"     "));this._noFields=!1;this.set("_suggArrayParam",a.resultFields[0].key)}catch(c){b.log("schema "+c,"error")}},getNormalizedData:function(a,b,d){var c,f=this.get("allowCache");return c=this.getNormalizedJson(a,b,d),f&&this.myCache.add(d,c,d),
c},handleNoFieldsInSchema:function(a){var c,d=this.getDefaultSuggArrParam(),e=a.results;b.log("Expecting resultListLocator to contain suggestions as raw array data with no objects inside","warn",g);this.set("_suggArrayParam",d);for(c=0;c<e.length;c+=1){if(b.Lang.isObject(e[c]))return b.error("When no resultFields are specified, the listlocator is assumed to be a pure array"),a;var f={};f[d]=e[c];a.results[c]=f}return a},handleCustomData:function(a,c){var d,e,f=this.get("_externalDS");a=a.typedData||
"";f=f.params;var g=f.custom,h=f.schema;return e=b.Lang.isFunction(g.data)?g.data(a):b.clone(g.data),h=f.schema,d=this.getNormalizedData(e,h,a),c(d)},handleExternalDS:function(a,b){return this.get("_externalDS").params.custom?this.handleCustomData(a,b):this.handleJsonReqest(a,b)},getNormalizedJson:function(a,c){var d;return this.validateSchema(c),b.log("=====data from server======","info"),b.log(b.JSON.stringify(a,null,"   "),"info"),b.log("=====schema provided======","info"),b.log(b.JSON.stringify(c,
null,"    "),"info"),d=b.DataSchema.JSON.apply(c,a),this._noFields&&(d=this.handleNoFieldsInSchema(d)),b.log("=====normalized json data======","info"),b.log(b.JSON.stringify(d,null,"    "),"info"),d},handleJsonReqest:function(a,c){var d;var e=this.get("_externalDS");var f=a.typedData||"",g=e.params;e=e.url;a=g.query;var h=this;this._DS.callBack={success:function(a){return d=h.getNormalizedData(a.response,g.schema,f),c(d)},failure:function(a){return b.log(a,"debug"),c(null)}};a=g.request+"&"+a+"="+
f;e+=a;b.log("=====request Url======","info");b.log(e,"info");this._DS.sendRequest({request:a,callback:this._DS.callBack})},createGossipParams:function(a){var c,d=this.get("webHistory"),e=this.get("smw"),f=this.get("ultEnabled"),g=this.get("maxSuggests");var h=this.get("pubid");var m={},k=this._originalQuery||"";0!==h&&(m.pubid=h);h=this.getCursorPosOnSearchBox();b.Lang.isNumber(h)&&h<a.length&&(m.ipos=h);d&&d.crumb&&0<d.maxSuggestions&&(m.f=1,m[".crumb"]=d.crumb);e&&e.crumb&&0<e.maxSuggestions&&
(m[".crumb"]=e.crumb);var n,p;h={};e=d=null;var q=this.get("geo");h=(q&&(n=q.lat,p=q.lon,e=q.woeid,null!==n&&null!==p&&(d=p+","+n,h.latlon=d),null!==e&&(h.geoid=e)),h);return h.latlon&&(m.ll=h.latlon),(h.geoid||0===h.geoid)&&(m.geoid=h.geoid),m.output="sd1",m.command=encodeURIComponent(a),m.pq=encodeURIComponent(k),m.l=1,m.bm=3,m.appid=this.get("appId"),m.t_stmp=(new Date).getTime(),m.nresults=g,m.bck=this.get("sendBCookie")?this.get("bcookie"):null,f&&(c=this.get("ult"),m.csrcpvid=encodeURIComponent(c.csrcpvid),
m.vtestid=encodeURIComponent(c.vtestid),m.mtestid=encodeURIComponent(c.mtestid),m.spaceId=c.spaceId),b.mix(m,this.get("gossipParams"),!0),b.log(m,"debug"),m},handleDefaultDS:function(a,c){function d(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b+"="+a[b]);return c.join("&")}function e(a){return b.log("jsonPSuccess for query:"+h,"debug",g),b.log(a,"debug"),p&&m.myCache.add(h,a),c(a)}function f(a){return b.log(a,"debug"),c(null)}var l=this.get("baseUrl"),h=a.typedData||"",m=this,k,n=this.createGossipParams(h),
p=this.get("allowCache"),q=function(a){b.jsonp(a,{on:{success:e,failure:f}})};a.ylcForAutoComplete&&(l+=a.ylcForAutoComplete);(a=window.YAHOO&&window.YAHOO.CryptoOb?window.YAHOO.CryptoOb:null)?((k=n.command)&&delete n.command,n.pq&&delete n.pq,l+="?"+d(n)+"&callback={callback}",a.encryptUrl(l,"command",k,function(a){q(a)})):(l+="?"+d(n)+"&callback={callback}",q(l))},fireJsonData:function(a){var c,d=this,e=this.get("allowCache"),f=this.myCache;this.now&&this.now.cancel();this.now=b.later(2,this,function(){return e&&
f&&f.retrieve(a.typedData)&&(c=f.retrieve(a.typedData),c&&c.response)?(b.log("cached response","debug",g),d._totalHitsToCache+=1,void d.fire("response-received",{jsonData:c.response})):void this.getJsonData(a,function(a){d._totalHitsToSuggestServer+=1;a?(b.log("un-cached response","debug",g),b.log("suggest data received, firing response-received event:response-received","debug",g),d.fire("response-received",{jsonData:a})):(b.log("no suggest data received, firing no-response-received event:no-response-received",
"debug",g),d.fire("no-response-received"))})})},getJsonData:function(a,b){var c=this.get("_externalDS");return""!==(a.typedData||"")||this.isTrendingEnabled()?c?this.handleExternalDS(a,b):this.handleDefaultDS(a,b):b(null)}})},"0.0.1",{requires:["search-assist"]});
YUI.add("search-assist-history-suggestions-plugin",function(b){var g=function(){g.superclass.constructor.apply(this,arguments)};b.mix(g,{NAME:"search-assist-history-suggestions-plugin",NS:"HistorySuggestions",ATTRS:{}});b.extend(g,b.Plugin.Base,{initializer:function(){b.log("instantiating the history Search plugin #######################","debug");this.doAfter("suggest-markup-has-been-attached-to-DOM",this._highlightHistorySuggestions)},_highlightHistorySuggestions:function(g){var a,c,d,e=this.get("host"),
f=e.get("webHistory"),l=e.get("tray").Node,h=0,m=this;var k=f.bcrumb;var n=f.maxSuggestions||3;0===f.maxSuggestions&&(n=0);g&&g.jsonData&&(a=g.jsonData,a.r&&(c=a.r));l&&(d=l.all("> ul li"),b.each(c,function(a,c){if(13===a.m){h+=1;var f=d.item(c);a=f.getAttribute("data");c=e.get("translation").HISTORY_CLEAR_TITLE||"Clear";if(n>=h&&(f.addClass("sa-history"),k)){var g="https://search.yahoo.com/history?action=del&query="+a+"&_bcrumb="+k+"&sa=1&o=js";a=function(a){a.stopPropagation();document.createElement("img").src=
g;f.remove(!0);m.flushCache()};c=b.Node.create('<span class="sa-history-clear">'+c+"</span>");c.on("click",a);!e.get("mobileAutoComplete")||"phone"!==e.get("currentDevice")&&"tablet"!==e.get("currentDevice")?f.append(c):(f.one(".ac-content").insert('<td width="45" class="mb-ac-clear-btn-wrapper"></td>',"after"),f.one(".mb-ac-clear-btn-wrapper").append(c))}}}))}});b.HistorySuggestionsPlugin=g},"1.0.0",{requires:["plugin","base-pluginhost","io-base"]});
YUI.add("search-assist-linktrack",function(b,g){var k="linktrack";k=function(){k.superclass.constructor.apply(this,arguments)};b.mix(k,{NAME:"LINKTRACK",ATTRS:{}});b.SEARCHASSIST.LINKTRACK=b.extend(k,b.SEARCHASSIST,{initializer:function(){(this.ULT=b.namespace("SA").ULT)&&(this._gprid="",b.log("Instantiating ULT for link tracking","debug",g))},_getGprid:function(){return this._gprid||""},_setGprid:function(a){return this._gprid=a||"",this._gprid},_generateLocalTimestamp:function(){var a=Math.round((new Date).getTime()/
1E3);return 9<a.toString().length?a:null},createi13nObj:function(a){return b.config.i13n?b.mix(b.config.i13n,{spaceid:a}):b.config.i13n={spaceid:a},b.config.i13n},getUltObj:function(a,c){var d=this._generateLocalTimestamp(),e={};return c=c||{},this.get("ult"),c&&b.mix(e,c),e.t_stmp=d,e.query=a.query,e.qstrl=a.qstrl,e.pqstr=a.pqstr,e.pqstrl=a.pqstrl,e.pos=a.pos,e.n_sugg=a.n_sugg,e.gprid=this._getGprid(),e.origin=b.config.win.location.hostname,a.sec&&(e.sec=a.sec),a.slk&&(e.slk=a.slk),a.uqstr&&(e.uqstr=
a.uqstr),a.uqstrl&&(e.uqstrl=a.uqstrl),e},instrumentFormSubmit:function(a){var b,d,e,f,g={},h={};this.ULT&&(b=this.get("ultEnabled"),d=this.get("ult"),e=d.spaceId,b&&e&&(f=this.get("extraUltParams")||{},h=this.getUltObj(a,f),g=this.setYlcOnAction(h,e),this.setHiddenFormItems(a,f)),this.fire("event-search-form-instrumented",g))},setHiddenFormItems:function(a){var c,d=this.get("searchForm");this.get("ult");a=a.fr2;var e=this;b.each({fr2:a},function(a,g){if("fr2"===g)a||(a="sb-top"),c=e.get("appId"),
c=c.substr(0,c.indexOf(".yahoo.com")),a+="-"+c;else if(!a)return;var f=d.get(g);f||(f=b.Node.create('<input type="hidden" name="'+g+'">'),d.prepend(f));f.set("value",a)})},setYlcOnAction:function(a,c){var d,e=this.get("searchForm"),f=e.getAttribute("action");return this.ULT.instrument?(b.log(a,"debug"),d=this.getInstrumentedUrl(f,a),e.setAttribute("action",d),b.log("Firing:event-search-form-instrumented","debug"),{spaceId:c,ultParams:a,instrumentedSubmitUrl:d}):void 0},getInstrumentedUrl:function(a,
b){var c,e=this.get("ult").spaceId;if(window.YAHOO&&window.YAHOO.CryptoOb&&window.YAHOO.CryptoOb){var f=["query","qstrl","pqstr","pqstrl"];for(c=0;c<f.length;c++)b[f[c]]&&delete b[f[c]]}return e?(this.createi13nObj(e),this.ULT.instrument?this.ULT.instrument(a,b):null):null},sendBeacon:function(a,b){b?document.createElement("img").src=this.ULT.instrument(b,a):this.ULT.beacon(a)},logAutoCompletion:function(a,b,d){var c=this.get("ult").spaceId;a={actn:"clk",qstrl:b.length,query:b&&encodeURIComponent(b)||
"",pos:d,pqstr:encodeURIComponent(a),pqstrl:a.length,uqstr:b.substr(a.length),uqstrl:b.substr(a.length).length,gprid:this._gprid,n_sugg:this.get("tray").len,sec:"search",slk:"qryupdate",_S:c};this.sendBeacon(a,this.ULT.DEFAULT_BEACON_URL)}})},"0.0.1",{requires:["search-assist","search-assist-ult"]});
YUI.add("search-assist-mobile",function(b,g){var k="mobile";k=function(){k.superclass.constructor.apply(this,arguments)};b.mix(k,{NAME:"Sa-Mobile",ATTRS:{}});b.SEARCHASSIST.MOBILE=b.extend(k,b.SEARCHASSIST,{mobileInit:function(){this.publishMobileEvts()},initializer:function(a){b.log("instantiating Mobile related","debug",g);this.get("quietMode")||this.mobileInit(a)},publishMobileEvts:function(){var a=this,c=this,d=this,e=this,f=c.get("searchForm"),l=c.get("searchBox"),h=this.get("saContainer"),m=
c.get("mobileExpandMode"),k=c.get("currentDevice"),n=this._allSubscr;this._touchmoved=!1;b.log("publishing Mobile events","debug",g);l&&("phone"===k||"tablet"===k)&&(this._mkeyUp=!1,this._mkeyDown=!1,l.getDOMNode(!0).addEventListener("input",function(){a._mkeyUp||a._mkeyDown?(a._mkeyUp=!1,a._mkeyDown=!1):a.fireInTheHole()},!0),n._mobileNativeUp=l.on("keyup",function(){a._mkeyUp=!0}),n._mobileNativeDown=l.on("keydown",function(){a._mkeyDown=!0}),this.pullSbxToTopOnFocus(),this.get("mobileAutoComplete")&&
h.addClass("mb-ac-wrapper"),n._clientSrchNodeOntouchEnd=l.on("click",function(a){c.get("mobileExpandMode")&&(a.stopPropagation(),a.preventDefault());e.handleEventOnSearchBox(a,"touchend")}),m||(b.delegate(["touchstart","click"],function(){a._clickOnSuggItem=!0},c.get("saContainer"),"li"),b.delegate("touchend",function(){a._clickOnSuggItem=!1},c.get("saContainer"),"li"),n._blurOnMobileNoExpand=l.on("blur",function(){return a._clickOnSuggItem?void(a._clickOnSuggItem=!1):!0===d._noRefresh?void(d._noRefresh=
!1):void d.removeSuggestionsMarkup()})));f&&m&&("phone"===k||"tablet"===k)&&(n._traySrchBoxOnFocus=c.get("searchBox").on("click",function(){c.get("searchBoxContainer").hasClass("bringtofront")||c.get("searchBoxContainer").addClass("bringtofront")}));("phone"===k||"tablet"===k)&&(b.Event.defineOutside("touchend"),n._traySrchFormOntouchEndOutside=c.get("searchForm").on("touchendoutside",function(){m&&e.removeMobileExpand();a.removeSuggestionsMarkup()}));"phone"!==k&&"tablet"!==k||(b.delegate("touchend",
function(b){c.get("searchBox").focus();a.removeHighlightClasses(b)},c.get("saContainer"),"li"),b.delegate("mouseover",function(){c.get("searchBox").focus()},c.get("saContainer"),"li"),b.delegate("click",function(b){a.removeHighlightClasses(b)},c.get("saContainer"),"li"),b.delegate(["click","touchend"],function(){c.get("searchBox").focus()},c.get("searchBoxContainer"),"*"),this._touchmoved=!1,b.delegate(["touchend","touchmove","click"],function(b){a.handleMobileEventsOnListItems(b)},c.get("saContainer"),
"li"))},handleMobileEventsOnListItems:function(a){return"touchmove"===a.type?void(this._touchmoved=!0):!0===this._touchmoved?void(this._touchmoved=!1):!this.get("mobileAutoComplete")||"mb_ac"!==a.target.get("className")&&"ac-btn"!==a.target.get("className")?(this.handleEventOnSuggestItem(a),this.onFormSubmission(a),void this.removeHighlightClasses(a)):(a.stopPropagation(),a.preventDefault(),this.handleEventOnSuggestItem(a,"autoComplete"),void this.get("searchBox").focus())},addAutoCompleteBtn:function(a){var b=
a.getHTML();a.setHTML('<table class="sa-ac-table" width="100%" cellspacing="0" cellpadding="0" border="0"><tr> <td class="ac-content">'+b+'</td><td width="45" class="ac-btn"><span class="mb_ac"></span></td></tr></table>')},handleMobileEventsOnSearchBox:function(a,c){var d,e=this.getQuery(),f=this,l=this.get("mobileExpandMode"),h=this.isTrendingEnabled();if(l&&!this.closeOnDone&&(this.closeOnDone=!0,b.later(500,this,function(){f.closeOnDone=f.get("searchBox").once("blur",function(a){l?b.later(100,
f,function(){f.removeMobileExpand(a)}):b.later(100,f,function(){f.removeSuggestionsMarkup()})})})),l&&this.addMobileExpand(),"touchend"===c&&(d=this.get("searchBox").get("value"),this.get("searchBox").set("value",d).focus()),"touchend"===c){if(this.isTrayOpen())return;""===e?this.isTrendingEnabled()&&this.fireInTheHole(a):this.fireInTheHole(a)}return"keyup"===c?void(""===e?h&&this.fireInTheHole(a):this.fireInTheHole(a)):"valuechange"===c||"query-emptiness"===c?(b.log("mobile:event:"+c,"debug",g),
void(h?""===this.getQuery()&&(b.log("query is empty","debug",g),this.isTrayOpen()&&this.isTrayTypeTrending()?b.log("trending tray already open","debug"):(b.log("Empty query and no tray is open so triggering tray to open","debug",g),this.fireInTheHole(a))):!this.isTrayOpen()||e&&""!==e||this.removeSuggestionsMarkup())):void 0},widenTray:function(){var a=this.isTrendingEnabled(),b=this.getTray();this.get("searchBox").focus();b&&b.Node&&this.isModeExpanded()?b.Node.addClass("widen-sa-tray"):a&&this.removeMobileExpand()},
updateSuggOnNoSugg:function(a,c){var d,e,f=this.getTray();return b.log("no suggestions available for the query autocompleted, so adding the same query as suggestionf or mobile","debug",g),e=this.highlightSuggestion(a,a),d=b.Node.create("<li>"+this.get("translation").MOBILE_SEARCH_FOR_TITLE+' "'+e+'"</li>'),d.setAttribute("pos",0),d.setAttribute("data",a),c.append(d),f.len=1,c},addMobileExpand:function(){var a,c=(this.get("currentDevice"),this.get("searchBox"));b.log("adding mobile expansion","debug");
this.get("mbxWrapperNode").addClass("mobile-expand-sbx-wrapper-style");c.addClass("widen-search-box");this.get("disablePlaceHolder")||(a=this.get("translation").MOBILE_PLACEHOLDER_TITLE,c.setAttribute("placeholder",a+" "+this.get("property")));this.renderClearButton();this.get("cancelButton")&&this.renderCancelBtn();this.renderMaskTray();(a=this.get("saContainer"))&&a.addClass("mbx-sa-tray-wrapper-style")},removeMobileExpand:function(){var a,c=this.getTray(),d=b.one(".sa-clear-btn"),e=this.get("searchBox"),
f=b.one(".mask-tray"),l=this.get("mbxWrapperNode"),h=this.get("saContainer");h&&(b.log("removing class mbx-sa-tray-wrapper-style","debug"),h.removeClass("mbx-sa-tray-wrapper-style"));l&&l.removeClass("mobile-expand-sbx-wrapper-style");b.log("removing mobile Expand","debug",g);this.get("cancelButton")&&(a=b.one(".mobile-expand-cancel-btn"),a&&(this.get("searchBox").removeClass("search-box-placeholder-for-cancel"),a.hide()),d=b.one(".sa-clear-btn-with-cancel-btn"));this._detachCloseOnDone();f&&f.hide();
e&&e.removeClass("widen-search-box");d&&d.hide();c&&c.Node&&c.Node.removeClass("widen-sa-tray");this.removeSuggestionsMarkup();this.get("disablePlaceHolder")||e.removeAttribute("placeholder")},renderMaskTray:function(){var a=b.one(".mask-tray"),c=this;a?a.show():(a=b.Node.create("<div></div>"),this.get("searchForm").append(a),a.addClass("mask-tray"),a.on(["touchstart","click"],function(a){a.stopPropagation();a.preventDefault();c.removeMobileExpand()}))},isModeExpanded:function(){return b.one(".widen-search-box")?
!0:!1},renderCancelBtn:function(){var a=b.one(".mobile-expand-cancel-btn"),c=this,d=function(a){b.log("removing mobile expansion ##########################","debug");a.stopPropagation();a.preventDefault();c.removeMobileExpand()};if(a)this.get("searchBox").addClass("search-box-placeholder-for-cancel"),a.show();else{try{var e=this.get("translation").MOBILE_EXIT_BUTTON_TITLE;a=b.Node.create('<div class="mobile-expand-cancel-btn">'+e+"</div>")}catch(f){}a&&(this.get("mbxWrapperNode").append(a),this.get("searchBox").addClass("search-box-placeholder-for-cancel"),
a.on(["touchstart","touchend","click"],d))}},renderClearButton:function(){var a=b.one(".sa-clear-btn"),c=this.get("searchBox");this.get("cancelButton")&&(a=b.one(".sa-clear-btn-with-cancel-btn"));a?this.isTrayTrending()&&!this.getQuery()?a.hide():this.getQuery()?a.show():a.hide():(a=b.Node.create("<div></div>"),a.setHTML('<div class="crosshair-wrapper"><div id="clearSearchBox" class="crosshair-head" role="button" aria-label="clear search box"><div class="hair"></div><div class="hair"></div></div></div'),
a.addClass(this.get("cancelButton")?"sa-clear-btn-with-cancel-btn":"sa-clear-btn"),this.get("mbxWrapperNode").append(a),a.on(["touchstart","click"],function(a){a.stopPropagation();c.set("value","");this.hide()}),a.on("touchend",function(a){a.stopPropagation()}),""===this.getQuery()&&a.hide())},_detachCloseOnDone:function(){var a=this.get("searchBox");this.closeOnDone&&b.Lang.isFunction(this.closeOnDone.detach)&&(this.closeOnDone.detach(),delete this.closeOnDone,this.closeOnDone=null,a.blur(),b.log("REMOVED close on done registeration",
"debug",g))},pullSbxToTopOnFocus:function(){this.get("searchBox").on("focus",function(){b.later(0,null,function(){0>=window.pageYOffset&&window.scrollTo(0,1)})})}})},"0.0.1",{requires:["search-assist","search-assist-core","search-assist-linktrack","search-assist-navigate","intl"]});
YUI.add("search-assist-navigate",function(b,g){var k="navigate";k=function(){k.superclass.constructor.apply(this,arguments)};b.mix(k,{NAME:"Sa-Navigate",ATTRS:{}});b.SEARCHASSIST.NAVIGATE=b.extend(k,b.SEARCHASSIST,{navInit:function(){this.publishKeyboardEvts();this._tabCount=1;this._origQuery=this.getQuery();this.timeSinceLastKey=0},initializer:function(a){b.log("instantiating NAVIGATE","debug",g);this._originalQuery=this.getQuery();this.get("quietMode")||this.navInit(a)},getOrigQuery:function(){return this._origQuery},
setOrigQuery:function(a){this._origQuery=a},minKeySatisfied:function(a){return a&&a.length>=this.get("minKey")?!0:!1},fireInTheHole:function(a,c){var d=this.getQuery(),e={},f=null;return this.get("spellCheck")&&""===d&&this.clearSpellCheck(),this.getOrigQuery(),c&&this.get("logAutoComplete")&&this.get("ultEnabled")&&!this.get("_externalDS")&&this.ULT&&(f=this.getYlcforAutoCompleteLogging(c)),0<this.get("minKey")&&!this.minKeySatisfied(d)?void this.removeSuggestionsMarkup():(this.setRenderedTrayType(""===
d&&this.isTrendingEnabled()?"trending":"normal"),this.setOrigQuery(d),b.log('firing some-activity-in-the-searchbox event: fired-typedData:"'+d+'"',"debug"),e={typedData:d,evtFacade:a},f&&(e.ylcForAutoComplete=f),void this.fire("some-activity-in-the-searchbox",e))},getYlcforAutoCompleteLogging:function(a){var c={},d=this.get("tray"),e={},f=this.get("extraUltParams")||{};return("tab"===a.actn||"arrow"===a.actn)&&(c.actn="keybrd"),"mb_ac"===a.actn&&(c.actn="mobile"),c.pos=a.pos,c.slk="qryupdate",c.sec=
"search",c.query=a.value&&encodeURIComponent(a.value)||"",c.qstrl=c.query.length,c.pqstr=a.query&&encodeURIComponent(a.query)||"",c.pqstrl=c.pqstr.length,c.uqstr=c.query&&encodeURIComponent(c.query.substr(c.pqstrl))||"",c.uqstrl=c.uqstr.length,d&&d.len&&(c.n_sugg=d.len),c.fr2="sa-gp",e=this.getUltObj(c,f),b.log("logging autocomplete","debug",g),this.getInstrumentedUrl("",e)},_defEvtFireInTheHole:function(a){var c={};b.log("received some-activity-in-the-searchbox event","debug",g);a&&(a.evtFacade&&
(this.evtFacade=a.evtFacade),b.log('received typedData:"'+a.typedData+'"',"debug",g),a.evtFacade?(b.log("received flame.evtFacade","debug",g),9!==a.evtFacade.charCode&&(this._tabCount=1)):b.log("missed passing eventFacade in firedinthehole event","debug",g),c.ylcForAutoComplete=a.ylcForAutoComplete||null,c.typedData=a.typedData,c.typedData?this.fireJsonData(c):!0===this.isTrendingEnabled()?(b.log("showing trending search","debug",g),this.fireJsonData(c)):(this.removeSuggestionsMarkup(),b.log("trending search supressed",
"debug",g)))},okTofollowTabIndex:function(){return b.log("_tabCount:"+this._tabCount,"debug",g),1===this._tabCount?(this.update_tabCount(),this.isTrayOpen(),!1):(this.update_tabCount(),!0)},update_tabCount:function(){this._tabCount=(this._tabCount+1)%2},getAutoCompleteValue:function(){var a=b.one(".sa-tray-list-container li");return a?decodeURIComponent(a.getAttribute("data")):null},okToAutoComplete:function(){return this.isAnySuggestionSelected()?!1:!0},handleTab:function(a){var c;var d=this.get("searchBox");
var e=this.getQuery(),f=this.getTray();if(this.isTrendingEnabled()||e){if(!e||this.okTofollowTabIndex())return void this.removeSuggestionsMarkup();if(a.preventDefault(),d&&f&&f.Node){if(!this.okToAutoComplete())return void this.fireInTheHole(a);(d=this.getAutoCompleteValue())?(this.setSearchBoxVal(d),c={pos:1,value:d,query:e,actn:"tab"},this.fireInTheHole(a,c)):(b.log("tray exists but did not get any autocomplete suggestions","warn"),this.closeTray())}else this.fireInTheHole(a),this.resetTabTrack()}},
getCursorPos:function(a){var c,d;return a?a.selectionStart?a.selectionStart:b.config.doc.selection&&b.config.doc.selection.createRange()?(c=b.config.doc,c.activeElement.focus(),d=c.selection.createRange(),d.moveStart("character",-c.activeElement.value.length),d.text.length):0:null},getCursorPosOnSearchBox:function(){var a=this.get("searchBox").getDOMNode();a=this.getCursorPos(a);return null===a?(b.log("unable to get cursor position","warn",g),null):(b.log("caretPos:"+a,"debug"),a)},isCursorAttheEnd:function(){var a=
this.getQuery().length,c=this.getCursorPosOnSearchBox();return b.log("len:"+a,"debug",g),b.log("cursorPos:"+c,"debug",g),a===c?!0:!1},handleArrowRight:function(a){var c,d=this.get("searchBox"),e=this.getQuery();var f=this.getTray();if(d&&f&&f.Node)if(this.okToAutoComplete()&&this.isCursorAttheEnd())(f=this.getAutoCompleteValue())&&e!==f?(this._noRefresh=!0,d.blur().set("value",f).focus(),c={pos:1,value:f,query:e,actn:"arrow"},this.fireInTheHole(a,c)):b.log("tray exists but did not get any autocomplete suggestions",
"warn");else if(this.isCursorAttheEnd())return void this.fireInTheHole(a)},handleEsc:function(){b.log("closing tray on esc press","debug");this.removeSuggestionsMarkup();this.get("searchBox").blur()},resetTabTrack:function(){this._tabCount=1},isAnySuggestionSelected:function(){var a=b.one(".sa-tray-list-container .list-item-selected");return b.log("selected suggestion node:"+a,"debug",g),a},handleArrowUp:function(a){var c;var d=(this.get("searchBox"),0);var e=[];if(b.log("ARROW UP KEY ***************",
"debug",g),this.resetTabTrack(),this._native)return void this.fireInTheHole();if(c=b.one(".sa-tray-list-container"),!c)return void this.fireInTheHole(a);if(d=c.all("> li"))if(d.each(function(a,b){e[b]=a}),a=e.length,d=this.isAnySuggestionSelected()||b.one(".sa-tray-list-container .list-item-hover")){b.log("selectedSuggestion:"+d.get("text"),"debug");d=0;var f=this.getOrigQuery();for(d=0;a>d;d+=1)if(e[d].hasClass("list-item-selected")||e[d].hasClass("list-item-hover")){if(e[d].removeClass("list-item-selected"),
e[d].removeClass("list-item-hover"),0===d){this.handleNativeInputMethod(f);break}d=(d-1)%a;f=e[d].getAttribute("data");var l=e[d].getAttribute("pos");this.handleNativeInputMethod(f,e[d]);this.fireCurrentSuggestionSelected({suggestion:f,pos:l});break}}else b.log("no suggestion selected :(","debug",g),d=a-1,e[d]&&(f=e[d].getAttribute("data"),l=e[d].getAttribute("pos"),this.fireCurrentSuggestionSelected({suggestion:f,pos:l}),this.handleNativeInputMethod(f,e[d]))},fireCurrentSuggestionSelected:function(a){this.fire("search-assist-suggestion-selected",
a)},handleArrowDown:function(a){var c;var d=(this.get("searchBox"),0);var e=[];if(b.log("ARROW DOWN KEY ***************","debug",g),this.resetTabTrack(),this._native)return void this.fireInTheHole();if(c=b.one(".sa-tray-list-container"),!c)return void this.fireInTheHole(a);if(d=c.all("> li"))if(d.each(function(a,b){e[b]=a}),a=e.length,this.isAnySuggestionSelected()||b.one(".sa-tray-list-container .list-item-hover")){d=0;var f=this.getOrigQuery();for(d=0;a>d;d+=1)if(e[d].hasClass("list-item-selected")||
e[d].hasClass("list-item-hover")){if(e[d].removeClass("list-item-selected"),e[d].removeClass("list-item-hover"),d===a-1){this.handleNativeInputMethod(f);break}d=(d+1)%a;f=e[d].getAttribute("data");var l=e[d].getAttribute("pos");this.fireCurrentSuggestionSelected({suggestion:f,pos:l});this.handleNativeInputMethod(f,e[d]);break}}else b.log("no suggestion selected :( ","debug",g),e[0]&&(f=e[0].getAttribute("data"),l=e[0].getAttribute("pos"),this.fireCurrentSuggestionSelected({suggestion:f,pos:l}),this.handleNativeInputMethod(f,
e[0]))},handleNativeInputMethod:function(a,c){var d=this.get("searchBox"),e=d.get("value");return""===e||this.get("allIe")||this.get("gecko")||this._c===this._d&&this._c===e||void 0===this._c||!this._native?(this._noRefresh=!0,d.blur().set("value",decodeURIComponent(a)).focus(),void(c&&c.addClass("list-item-selected"))):(b.log("native tray detected, updating tray","debug"),void this.fireInTheHole())},handleAnyKeySearch:function(a){var c,d,e,f,g,h=b.config.win,k=b.config.doc,t=this,n=this,p=function(b){(e=
b.keyCode,g=b.target||b.srcElement,f||(f=t.get("searchBox").getDOMNode()),"EMBED"===g.tagName||"OBJECT"===g.tagName||"INPUT"===g.tagName||"TEXTAREA"===g.tagName||b.altKey||b.metaKey||b.ctrlKey||!(32>e||40<e)||9===e||13===e||16===e||27===e)||n.get("backspaceBehaviorNative")&&8===e||((c=f.value.length)&&(8===e?(b.preventDefault(),f.value=f.value.substr(0,f.value.length-1)):a&&(f.value+=" ",c+=1),n.get("replaceQueryOnFocus")&&(f.value=""),f.setSelectionRange?f.setSelectionRange(c,c):f.createTextRange&&
(d=f.createTextRange(),d.moveStart("character",c),d.select())),f.focus())};h.addEventListener?(h.removeEventListener("keydown",this._fnCheckFocusPtr),this._fnCheckFocusPtr=p,h.addEventListener("keydown",p,!1),b.log("################### w.addEventListener","debug")):h.attachEvent&&(this.ieAnyKeyDocumentEvt&&k.detachEvent("onkeydown",this._fnCheckFocusPtr),this._fnCheckFocusPtr=p,this.ieAnyKeyDocumentEvt=k.attachEvent("onkeydown",p),b.log("################### d.attachEvent","debug"))},getKeyDownState:function(){return this.keyDown},
stopMonitoringUserIdleNess:function(){var a=this._allSubscr;a._timeSinceLastkeyStroke&&a._timeSinceLastkeyStroke.cancel()},monitorUserIdleNess:function(){var a=this._allSubscr,c=this;this.noActivityForLong=!1;a._timeSinceLastkeyStroke&&(a._timeSinceLastkeyStroke.cancel(),this.timeSinceLastKey=0);a._timeSinceLastkeyStroke=b.later(2E3,this,function(){c.timeSinceLastKey+=2E3;3E4<c.timeSinceLastKey&&(c.noActivityForLong=!0,a._timeSinceLastkeyStroke.cancel())},[],!0)},publishKeyboardEvts:function(){b.log("publishing default handler function for the event when there is some activity in search box",
"debug",g);this.publish("some-activity-in-the-searchbox",{defaultFn:b.bind("_defEvtFireInTheHole",this)});var a=this.get("searchBox"),c=this,d=this,e=this._allSubscr,f=this.get("noSpaceOnFocus");this.keyDown=!1;e._navigateHtmlOnKeyDown=b.one("html").on("keydown",function(a){8!==a.charCode&&(c.keyDown=!0)});e._navigateHtmlOnKeyUp=b.one("html").on("keyup",function(){c.keyDown=!1});!0===this.get("anyKeySearch")&&c.handleAnyKeySearch(f?!1:!0);a?(e._navigateSrchNodeOnKeyDown=a.on("keydown",function(a){b.log("escape on keydown",
"debug");27===a.charCode&&c.handleEsc(a);9===a.charCode&&c.handleTab(a);38===a.charCode&&a.preventDefault()}),b.later(200,this,function(){e._navigateSrchNodeOnFocus=a.on("focus",function(){""===c.getQuery()&&this.fire("query-emptiness")})}),e._navigateSrchNodeOnEmptyQuery=a.on("query-emptiness",function(a){d.handleEventOnSearchBox(a,"query-emptiness")}),e._navigateSrchNodeOnKeyUp=a.on("keyup",function(a){c.handleKeyEvent(a,"keyup")})):b.log("invalid searchNode, no keyboard or mouse or touch events registered",
"error",g)},handleKeyEvent:function(a,c){this.timeSinceLastKey=0;40===a.charCode?this.handleArrowDown(a):38===a.charCode?this.handleArrowUp(a):39===a.charCode?this.handleArrowRight(a):37===a.charCode?b.log("arrow left shouldnt do anything","info"):27===a.charCode?b.log("Esc key on keyup","debug"):8===a.charCode?""!==this.getQuery()?(b.log("backspace was pressed, query is empty - firing suggest","debug",g),this.fireInTheHole(a)):this.isTrayTrending()&&!this.isTrayOpen()&&(b.log("backspace was pressed, tray not open, query is valid - firing suggest",
"debug",g),this.fireInTheHole(a)):13===a.charCode?(!0===this._native&&(this._native=!1,this.handleEventOnSearchBox(a,c)),b.log("return key","debug")):18===a.charCode||16===a.charCode?b.log("special key pressed","debug",g):(b.log("searchnode on keyup","debug",g),this.handleEventOnSearchBox(a,c))}})},"0.0.1",{requires:["search-assist"]});
YUI.add("search-assist-smw-suggestions-plugin",function(b){var g=function(){g.superclass.constructor.apply(this,arguments)};b.mix(g,{NAME:"search-assist-history-suggestions-plugin",NS:"SmwSuggestions",ATTRS:{}});b.extend(g,b.Plugin.Base,{initializer:function(){b.log("instantiating the SMW plugin #######################","debug");this.doAfter("suggest-markup-has-been-attached-to-DOM",this._highlightSmwSuggestions)},_highlightSmwSuggestions:function(g){var a,c,d,e,f=this.get("host"),l=f.get("tray").Node,
h=f.get("smw"),k=f.get("translation").SMW_PRIVATE_LABEL_TITLE||"Private result",t=0;g&&g.jsonData&&(a=g.jsonData,a.r&&(d=a.r));var n=h.maxSuggestions||3;0===h.maxSuggestions&&(n=0);l&&(e=l.all("> ul li"),b.each(d,function(a,d){31===a.m&&(t+=1,a=e.item(d),n>=t&&(a.setAttribute("type","smw"),a.addClass("sa-smw"),c=b.Node.create('<span class="sa-smw-private-label">'+k+"</span>"),!f.get("mobileAutoComplete")||"phone"!==f.get("currentDevice")&&"tablet"!==f.get("currentDevice")?a.append(c):(a.one(".ac-content").insert('<td width="80" class="mb-ac-clear-btn-wrapper"></td>',
"after"),a.one(".mb-ac-clear-btn-wrapper").append(c))))}))}});b.namespace("SEARCHASSIST").SmwSuggestionsPlugin=g},"1.0.0",{requires:["plugin","base-pluginhost","io-base"]});
YUI.add("search-assist-tray",function(b,g){var k="tray";k=function(){k.superclass.constructor.apply(this,arguments)};b.mix(k,{NAME:"Sa-Tray",ATTRS:{tray:{},cloud:{}}});b.SEARCHASSIST.TRAY=b.extend(k,b.SEARCHASSIST,{trayInit:function(){this.publishTrayEvts();this.set("tray",{});this._firstSuggestion=this._curPos=this._curSuggestion=""},initializer:function(a){b.log("instantiating TRAY","debug",g);this.get("quietMode")||this.trayInit(a);this.get("configPanel")&&this.plug(b.SEARCHASSIST.SaConfigUIPlugin);
this.get("ariaPlug")&&this.plug(b.SEARCHASSIST.AriaPlugin);this._sbxPadLeftInt=this.getSearchBoxPadding("left")||0;this._sbxPadRightInt=this.getSearchBoxPadding("right")||0;this._isWidthComputed=this._offsetWidth=this._queryWidth=0;this._subAssistReady=!1},publishTrayEvts:function(){var a=this,c=this.get("searchForm"),d=this.get("currentDevice"),e=this._allSubscr;b.log("publishing Tray events","debug",g);this.publish("response-received",{defaultFn:b.bind("_defEvtRespRecvdFn",this)});this.publish("suggest-markup-has-been-attached-to-DOM",
{defaultFn:b.bind("_defEvtSuggestMarkupRendered",this)});this.publish("no-response-received",{defaultFn:b.bind("_defEvtNoRespRecvdFn",this)});this.get("autoAlign")&&this.alignTrayRegisteration();e._traySuggestionSelect=this.on("search-assist-suggestion-selected",function(b){a._curSuggestion=b.suggestion;a._curPos=parseInt(b.pos,10)});c&&(e._traySrchFormOnSubmit=c.on("submit",function(b){a.onFormSubmission(b)}),e._traySrchFormWrapperOnClickOutside=this.get("saFormWrapper").on("clickoutside",function(){b.log("clickoutside captured on ",
"debug",g);a.removeSuggestionsMarkup();a.fire("search-assist-tray-click-outside")}));"desktop"===d&&(b.delegate("mouseover",function(){a.removeAllListHighlights();this.addClass("list-item-hover")},this.get("saContainer"),"li"),b.delegate("mouseout",function(b){a.removeHighlightClasses(b)},this.get("saContainer"),"li"),b.delegate(["click"],function(b){a.handleEventOnSuggestItem(b);a.onFormSubmission(b);a.removeHighlightClasses(b)},this.get("saContainer"),"li"))},getTray:function(){return this.get("tray")},
isTrayEmpty:function(){var a=b.one(".sa-tray-list-container li");return a?(b.log("trays first list element:"+a,"debug"),!1):!0},getSuggestData:function(a){return decodeURIComponent(a.currentTarget.getAttribute("data"))},getSuggestPosition:function(a){var b;return b="B"===a.target.get("nodeName").toUpperCase()?a.target.get("parentNode").getAttribute("pos"):a.currentTarget.getAttribute("pos"),parseInt(b,10)},removeAllListHighlights:function(){b.all(".sa-tray-list-container .list-item-hover").removeClass("list-item-hover");
b.all(".sa-tray-list-container .list-item-selected").removeClass("list-item-selected")},restoreFormAction:function(){var a=this.get("searchForm");var b=this.get("action");a.setAttribute("action",b)},customizeFormAction:function(){var a;this.restoreFormAction();var c=this.get("searchForm");var d=this.get("action");this.get("ylt")?a=d.replace(this.get("ylt"),this.get("yltCustom")):(a=";"===d[d.length-1]?d+this.get("yltCustom"):d+";"+this.get("yltCustom"),b.log("no default ylt token found on form action to replace it with customYlt",
"warn"));c.setAttribute("action",a)},onFormSubmission:function(a){var c,d,e,f=this,l={},h=f.get("tray"),k=this,t=0,n=this.get("mobileExpandMode");a.preventDefault();this.get("ultEnabled")&&!this.get("_externalDS")&&this.ULT&&this.get("ult")&&this.get("ult").spaceId&&(c={pqstr:"",n_sugg:0,pos:0,query:"",pqstrl:"",qstrl:""},h&&h.len&&(t=h.len),e=this.getOrigQuery()||"",c.pqstr=e&&encodeURIComponent(e)||"",c.pqstrl=e.length,c.n_sugg=t,"click"===a.type||"touchend"===a.type||"gesturemoveend"===a.type?
(this.get("yltCustom")&&this.customizeFormAction(),"trending"===h.Node.getAttribute("type")&&this.isTrendingTitleEnabled()&&this.get("searchForm").one('input[name="fr"]').set("value","sfp-tts-s"),c.fr2="sa-gp",c.pos=f.getSuggestPosition(a),"number"!=typeof c.pos&&(c.pos=0),d=f.getSuggestData(a)):d=this.getQuery(),"submit"===a.type&&(d===this._curSuggestion?(this.get("yltCustom")&&this.customizeFormAction(),c.fr2="sa-gp",c.pos=this._curPos,"number"!=typeof c.pos&&(b.log("ULT:error:position of click/touch of suggestion undefined",
"error",g),c.pos="")):(c.pqstr="",c.pqstrl="")),c.query=d&&encodeURIComponent(d)||"",c.qstrl=c.query.length,this.instrumentFormSubmit(c));h&&h.Node&&h.Node.addClass("trans-hide");b.later(500,this,function(){b.log("time for suggest markup to be removed look for : TIME_BEFORE_SUGGEST_MARKUP_IS_REMOVED","debug",g);n&&(b.log("inside Form SUbmission and now removing mobile expand","debug",g),k.removeMobileExpand());f.removeSuggestionsMarkup()});a.currentTarget&&(l=a.currentTarget);b.log("firing event:search-assist-form-submit",
"debug",g);this.fire("search-assist-form-submit",{suggestionNode:l});this._originalQuery=""},handleEventOnSuggestItem:function(a,b){var c,e,f,g,h,k=this.get("searchBox");return c=this.getSuggestData(a),e=c.toString(),h=this.getSuggestPosition(a),g=this.getQuery(),this.setSearchBoxVal(c),b?(c+=" ",this._noRefresh=!0,k.blur().set("value",c).focus(),f={pos:h,value:c,query:g,actn:"mb_ac"},this.fireInTheHole(a,f),void this.logAutoCompletion(g,e,h)):void 0},resizeTray:function(){var a=this.get("searchBox"),
c=this.get("searchBoxContainer"),d=a.get("clientWidth"),e=a.get("clientHeight"),f=a.getXY(),g=f[1]+e,h=10;this.resizeSa&&this.resizeSa.cancel();this.resizeSa=b.later(0,this,function(){this.isWidthComputed=!1;f=a.getXY();d=a.get("clientWidth");f===this.searchBoxPos&&d===this.searchBoxWidth||(this.searchBoxPos=f,this.searchBoxWidth=d,g=f[1]+e,h=10,f[1]=g+h,b.log("searchBoxWidth:"+d,"debug"),b.log("searchBoxHeight:"+e,"debug"),b.log(f,"debug"),c.setStyles({width:d+"px"}),c.setXY(f))})},alignTrayDeregisteration:function(){var a=
this._allSubscr,b=this.get("searchBoxContainer");a&&a._trayAutoAlignOnResize&&a._trayAutoAlignOnResize.detach();b.setStyles({position:"",width:"","margin-top":"",left:"",top:""})},alignTrayRegisteration:function(){var a=this._allSubscr,c=this.get("searchBox"),d=this.get("searchBoxContainer"),e=c.get("clientWidth"),f=c.get("clientHeight");c=c.getXY();c[1]=c[1]+f+10;b.log("searchBoxWidth:"+e,"debug",g);b.log("searchBoxHeight:"+f,"debug",g);b.log(c,"debug",g);d.setStyles({position:"absolute",width:e+
"px","margin-top":"1px"});d.setXY(c);a._trayAutoAlignOnResize=b.on("resize",this.resizeTray,b.config.win,this)},removeHighlightClasses:function(a){a&&a.currentTarget&&(a.currentTarget.removeClass("list-item-hover"),a.currentTarget.removeClass("list-item-selected"))},attachTrendingTrayLabels:function(){var a,c=b.one(".trending-title"),d=b.one(".related-title");c&&c.remove();d&&d.remove();(a=b.one(".trending-label-position"))&&(c=b.Node.create("<span></span>"),c.addClass("trending-title"),c.setContent(this.get("translation").TRENDING_NOW_TITLE),
a.insertBefore(c,a));(a=b.one(".related-label-position"))&&(d=b.Node.create("<span></span>"),d.addClass("related-title"),d.setContent(this.get("translation").RELATED_TITLE),a.insertBefore(d,a))},highlightSuggestion:function(a,c,d){var e,f=c.split(/[\s|,]/),g="";if(this.get("disableHighlight"))return a;for(c=0;c<f.length;c+=1){var h=f[c];f[c]=f[c].replace(/[;\?,:'\/.%\*&\\\(\)\^]/g,"");f[c]&&(g=g+h+" ")}return(g=this.trimEndSpace(g))?(e=d||a,g=g.split(" "),b.Highlight.all(e,g)):a},isTrayOpen:function(){var a=
this.get("tray");return a&&a.Node?(b.log("tray and tray.Node exist","debug",g),!0):(b.log("tray or tray.Node doesnt exist yet","debug",g),!1)},closeTray:function(){this.isTrayOpen()&&this.removeSuggestionsMarkup()},buildTrayNode:function(){var a=this.get("saContainer"),c=this.get("tray");return c.Node||(c.Node=b.Node.create("<div></div>"),c.Node.addClass("sa-tray"),a.append(c.Node)),c.Node},buildEmptyTray:function(){var a=b.Node.create("<ul></ul>");return a.addClass("sa-tray-list-container"),a},buildTray:function(a){b.log("building TRAY",
"debug",g);this.buildTrayNode();this.buildTrayContent(a)},buildTrayContent:function(a){var c=this.get("tray"),d=this.isTrayTypeTrending(),e=this.getQuery();var f=this.getTrayHtml(a);this.fire("before-suggest-markup-has-been-attached-to-DOM");0<c.len?(c.Node.setHTML(f),this.fire("suggest-markup-has-been-attached-to-DOM",{trending:d,query:e,suggestionMarkup:f,firstSuggestion:this._firstSuggestion,jsonData:a})):(this.update_tabCount(),this.closeTray(),this.fire("zero-suggestions-rendered-to-DOM",{query:e}),
b.log("closed the tray, since tray.len is 0","debug",g))},buildSuggestion:function(a){return b.Node.create("<li>"+a+"</li>")},getTrayHtml:function(a){var c,d,e,f,l,h,k,t,n,p,q,u,v=this.getQuery(),D=this.isTrayTypeTrending(),y=0,r=this.getTray(),A=!1,B=!1,w=this.get("currentDevice"),E="desktop"===w&&!this.get("ieTillSeven")&&this.get("subAssist")&&a.sqpos&&b.Lang.isNumber(a.sqpos),z=this.getQuery(),C=this.get("enableTruncation")&&("tablet"===w||"phone"===w);if(c=a.r,p=this.getDefaultSuggArrParam(),
this.get("_externalDS"))try{if(!a.results)throw b.error("results has no data, check schema and server data");p=this.get("_suggArrayParam");c=a.results}catch(F){b.log("error"+F,"error"),b.log(JSON.stringify(a,null,"  "),"error")}if(d=c.length,this._offsetWidth=0,this._isWidthComputed=!1,e=this.buildEmptyTray(),r&&r.Node&&C&&r.Node.addClass("truncation"),a&&a.l&&(f=this._setGprid(a.l.gprid)),b.log("Gprid:"+f,"debug",g),r&&(r.origLen=d,r.len=0),0<d){r&&r.Node&&this.computeQueryWidthOnDOM(z,r,e);d>this.get("maxSuggests")&&
(d=this.get("maxSuggests"));for(u=0;d>u;u+=1){var x=c[u][p];f=b.Escape.html(c[u][p]);0===u&&(this._firstSuggestion=f);C?(q=this.computeTruncation(f,r,e,this.get("searchBox").get("clientWidth")),l=q.truncated?this.highlightSuggestion("..."+q.text,v,x):this.highlightSuggestion(f,v,x)):l=this.highlightSuggestion(f,v,x);E&&!this.isQueryPastSearchBox()?(this._subAssistReady=!0,t=z.substr(a.sqpos),k=x.substr(a.sqpos),k=this.trimEndSpace(k),k&&(l=this.highlightSuggestion(k,t),r&&r.Node&&!r.Node.hasClass("sub-assist")&&
(r.Node.addClass("sub-assist"),r.Node.addClass("no-wrap")),r&&r.Node&&!this._isWidthComputed&&(this._isWidthComputed=!0,n=z.substr(0,a.sqpos),this._offsetWidth=this.computeListItemWidth(n,r,e,!0)-this._sbxPadLeftInt-(this._listItemPadLeftInt||0)+5))):(this._subAssistReady=!1,this.removeSubAssist(r));l&&(h=b.Node.create("<li>"+l+"</li>"),h.setAttribute("pos",u+1),h.setAttribute("data",encodeURIComponent(x)),D&&(4!==c[u].m||A||(A=!0,h.addClass("trending-label-position")),2!==c[u].m||B||(B=!0,h.addClass("related-label-position"))),
this.get("webHistory")&&13===c[u].m&&h.setAttribute("type","history"),!this.get("mobileAutoComplete")||"tablet"!==w&&"phone"!==w||this.addAutoCompleteBtn(h),y+=1,e.append(h))}return r&&(r.len=y),b.log("Printing Tray markup","debug",g),b.log(e.getHTML(),"debug",g),e}return this.get("mobileExpandMode")&&r&&0===y&&""!==v?this.updateSuggOnNoSugg(v,e):void 0},computeQueryWidthOnDOM:function(a,b,d){return this._queryWidth=this.computeListItemWidth(a,b,d,!0),this._queryWidth},isQueryPastSearchBox:function(){var a=
this._queryWidth,c=this.get("searchBox").get("clientWidth")-this._sbxPadLeftInt;return a>c-this._sbxPadRightInt?(b.log("textWidth:"+a+"greater than sbxWidth:"+c,"debug",g),!0):!1},handleSubAssistReady:function(){var a,b,d=this.get("tray");this._subAssistReady&&(b=this.get("searchBox").get("clientWidth"),a=d.Node.get("clientWidth"),this._offsetWidth+a>b&&(d.Node.removeClass("no-wrap"),this._offsetWidth=b-d.Node.get("clientWidth")),d.Node.setStyle("left",this._offsetWidth+"px"))},removeSubAssist:function(a){a&&
a.Node&&(a.Node.removeClass("sub-assist"),a.Node.removeClass("no-wrap"),a.Node.removeClass("absolute"))},getSearchBoxPadding:function(a){var b,d=this.get("searchBox");return"left"===a&&(b=d.getStyle("paddingLeft")),"right"===a&&(b=d.getStyle("paddingRight")),this.convertPxToInt(b)},convertPxToInt:function(a){var b=0;return a&&1<a.length&&(a=a.substr(0,a.length-2),b=parseInt(a,10)),b},computeTruncation:function(a,c,d,e){var f,g,h=b.Node.create('<li class="measurer"><b class="yui3-highlight">'+b.Escape.html(a)+
"</b></li>");return c.Node.addClass("measurer-absolute"),c.Node.addClass("measurer-no-wrap"),h.addClass("measurer-no-overflow"),d.append(h),c.Node.setHTML(d),h.setHTML('<li class="measurer"><b class="yui3-highlight">'+a+"</b></li>"),f=h.get("clientWidth"),e>f?(h.remove(),c.Node.removeClass("measurer-absolute"),c.Node.removeClass("measurer-no-wrap"),{text:a,truncated:!1}):(g=e>f-30?7:e>f-60?14:e>f-90?21:e>f-120?28:35,h.remove(),c.Node.removeClass("measurer-absolute"),c.Node.removeClass("measurer-no-wrap"),
{text:a.substr(g),truncated:!0})},computeListItemWidth:function(a,c,d,e){var f;a=b.Node.create('<li><b class="yui3-highlight">'+b.Escape.html(a)+"</b></li>");return c.Node.addClass("measurer-absolute"),e&&(c.Node.addClass("measurer-no-wrap"),a.addClass("measurer-no-overflow")),d.append(a),c.Node.setHTML(d),void 0===this._listItemPadLeftInt&&(this._listItemPadLeftInt=this.convertPxToInt(a.getStyle("paddingLeft"))),f=c.Node.get("clientWidth"),a.remove(),c.Node.removeClass("measurer-absolute"),e&&c.Node.removeClass("measurer-no-wrap"),
c.Node.setHTML(""),f},isTrendingTitleAttached:function(){return b.one(".trending-title")?!0:!1},isTrayTrending:function(){return!this.isTrendingEnabled()||this.getQuery()||this.isTrayEmpty()?!1:(b.log("Trending tray is open","debug",g),this.get("searchBox").focus(),!0)},setRenderedTrayType:function(a){this.trayType=a},getRenderedTrayType:function(){return this.trayType},isTrayTypeTrending:function(){return"trending"===this.getRenderedTrayType()?(b.log("tray type is Trending","debug",g),!0):(b.log("tray type is normal",
"debug",g),!1)},removeTrayHtml:function(){var a=this.get("tray");a&&a.Node&&(a.Node.remove(!0),delete a.Node,this.fire("search-assist-tray-removed"))},removeSuggestionsMarkup:function(){b.log("removing Markup for Suggestions","debug",g);this.isRenderMode("tray")&&this.removeTrayHtml();this.get("fakeBox")&&!this.get("ieTillEight")&&(this.ghost&&this.ghost.cancel(),this.resetFBox())},isRenderMode:function(a){return this.get("renderMode")===a?!0:void 0},buildSuggestionsMarkup:function(a){b.log("Building Markup for Suggestions",
"debug",g);this.isRenderMode("tray")&&this.buildTray(a)},_defEvtRespRecvdFn:function(a){var c=this.get("spellCheck");b.log("~~~~~~~~~~~number of suggest server hits"+this._totalHitsToSuggestServer,"debug",g);b.log("~~~~~~~~~~~number of cache hits"+this._totalHitsToCache,"debug",g);a&&a.jsonData?(c&&this.spellCheck(a.jsonData),this.buildSuggestionsMarkup(a.jsonData)):b.log("no data received from suggest server","debug",g)},_defEvtNoRespRecvdFn:function(){var a=this;b.later(100,this,function(){a.closeTray()});
b.log("~~~~~~~~~~~number of suggest server hits"+this._totalHitsToSuggestServer,"debug",g);b.log("~~~~~~~~~~~number of cache hits"+this._totalHitsToCache,"debug",g);b.log("no response received from suggest server:"+this.get("baseUrl"),"debug",g)},_defEvtSuggestMarkupRendered:function(a){b.log("Suggest has been attached to DOM: RENDER complete","debug",g);var c=this.get("tray"),d=this.get("branding"),e=this.get("mobileExpandMode"),f=this.isTrendingEnabled(),l=this.isTrendingTitleEnabled();return f||
""!==this.getQuery()?(this.handleSubAssistReady(),c&&c.Node&&(a.trending?(this.attachTrendingTrayLabels(c.Node),c.Node.setAttribute("type","trending"),l&&c.Node.insertBefore('<div class="trayTitle"><span class="icon trendingGray"></span><span class="title">TRENDING NOW</span></div>',c.Node.one(".sa-tray-list-container"))):c.Node.setAttribute("type","normal"),d&&c.Node.append('<div class="branding '+d.mode+' ">'+d.label+"</div>")),this.fire("search-assist-tray-showing",{mobileExpandMode:e}),void(e&&
this.widenTray())):void this.closeTray()},addNewSuggestion:function(a){var c,d=this.getTray(),e=a.markup||"",f=b.one(".sa-tray-list-container"),l=a.suggestionText||"";b.log("adding new suggestion","debug",g);this.buildTrayNode();f||(b.log("Building empty tray","debug",g),f=this.buildEmptyTray(),d.Node.setHTML(f));d&&d.Node&&f&&(b.log("tray and tray.Node and trayListContainer exist","debug",g),c=b.Node.create('<li class="spcl-sugg">'+e+"</li>"),c.setAttribute("data",encodeURIComponent(l)),a.prepend?
f.prepend(c):f.append(c))}})},"0.0.1",{requires:"search-assist-aria-plugin search-assist-config-panel-plugin search-assist-history-suggestions-plugin search-assist-smw-suggestions-plugin search-assist search-assist-core search-assist-linktrack search-assist-navigate intl".split(" ")});
YUI.add("search-assist-ult",function(b){function g(a){var b="",c=a.length,d=0;do{var g=a.charCodeAt(d++);var k=a.charCodeAt(d++);var t=a.charCodeAt(d++);var n=g>>2;g=(3&g)<<4|k>>4;var p=(15&k)<<2|t>>6;var q=63&t;isNaN(k)?p=q=64:isNaN(t)&&(q=64);b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789._-".charAt(n)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789._-".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789._-".charAt(p)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789._-".charAt(q)}while(c>
d);return b}function k(a){var b;var c=0;for(b=a.length;b>c;c++)if(32>a.charCodeAt(c))return!0;return!1}var a=b.Lang,c=b.namespace("SA");c.ULT||(c.ULT={});b.mix(c.ULT,{SRC_SPACEID_KEY:"_S",DEFAULT_BEACON_URL:"http://geo.yahoo.com/t",beacon:function(a){a=this.instrument(this.DEFAULT_BEACON_URL,a)+"?t="+Math.random();var b=new Image;b.onload=b.onerror=function(){b=b.onload=b.onerror=null};b.src=a},instrument:function(d,e){var f,l,h=[],m=[];if(!a.isObject(e))return d;if(!e[c.ULT.SRC_SPACEID_KEY]){if(!b.config.i13n||
!b.config.i13n.spaceid)return d;e[c.ULT.SRC_SPACEID_KEY]=b.config.i13n.spaceid}return e._r=2,l=0,b.each(e,function(b,c){if(!a.isString(b))try{b=b.toString()}catch(p){return d}return 1>c.length||8<c.length||-1!==c.indexOf(" ")||k(c)||k(b)?(h=[],d):void(h[l++]=c)}),h.length?(h=h.sort(),l=0,b.each(h,function(a){var b=e[a];m[l++]=a+"\u0003"+b}),f=m.join("\u0004"),1>f.length||1024<f.length?d:(f=";_ylc="+g(f),l=d.indexOf("/*"),-1===l&&(l=d.indexOf("/?")),-1===l&&(l=d.indexOf("?")),-1===l?d+f:d.substr(0,
l)+f+d.substr(l))):d}})},"0.0.1",{requires:["event-delegate","querystring-stringify"]});
YUI.add("search-assist",function(b,g){var k=b.namespace("Client-Side-Search-Assist"),a={bcrumb:(new Date).getTime(),crumb:(new Date).getTime(),maxSuggestions:3,highlightHistory:!0},c={crumb:(new Date).getTime(),maxSuggestions:3},d={label:"Search Suggest by Yahoo",mode:"regular"},e={spaceId:null,csrcpvid:null,vtestid:null,mtestid:null},f={lat:null,lon:null,woeid:null},l={expandMode:!1,skin:"phone",disablePlaceHolder:!1},h={expandMode:!1,skin:"desktop",disablePlaceHolder:!0},m={expandMode:!1,skin:"tablet",
disablePlaceHolder:!0},t={desktop:h,phone:l,tablet:m},n={RELATED_TITLE:"Related Searches",TRENDING_NOW_TITLE:"Trending Searches",MOBILE_SEARCH_FOR_TITLE:"Search For",MOBILE_EXIT_BUTTON_TITLE:"cancel",MOBILE_END_PIECE_TITLE:"Press Enter To Search",MOBILE_PLACEHOLDER_TITLE:"Search"},p={US:!0,AR:!0,AU:!0,BR:!0,CA:!0,DE:!0,ES:!0,FR:!0,QC:!0,HK:!0,ID:!0,IN:!0,IT:!0,KR:!0,MX:!0,MY:!0,NZ:!0,PH:!0,SG:!0,TH:!0,TW:!0,UK:!0,ESPANOL:!0,MALAYSIA:!0,VN:!0,AT:!0,CH:!0,CL:!0,CO:!0,DK:!0,FI:!0,NL:!0,NO:!0,PE:!0,RU:!0,
SE:!0,VE:!0},q={"en-US":{web:0,sports:102,image:103,news:104,directory:108,video:112,audio:115,finance:596,"autos-vertical":609,"autos-related":610,"autos-also-try":611,"music-web-backfill":1002,shine:1003,omg:1004,games:1005,dictionary:1306,answers:1307,"answers-vertical":1317,"movie-vertical":1308,"movie-web-backfill":1308,"shopping-vertical":1312},"es-AR":{web:0,image:287,news:288,video:292,blog:359,answers:1307,"answers-vertical":1317},"de-AT":{web:0},"en-AU":{web:0,image:231,news:232,directory:234,
video:236,lifestyle:1101,sports:1102,tv:1103,finance:1104,movie:1105,recipe:1106,"movie-vertical":1308,"movie-web-backfill":1308,answers:1307,"answers-vertical":1317},"pt-BR":{web:0,image:244,news:245,video:249,answers:1307,"answers-vertical":1317},"en-CA":{web:0,image:396,news:397,directory:399,video:401,"movie-vertical":1308,"movie-web-backfill":1308,answers:1307,"answers-vertical":1317},"fr-CA":{web:0,image:411,news:412,directory:414,video:416,answers:1307,"answers-vertical":1317},"fr-CH":{web:0},
"it-CH":{web:0},"de-CH":{web:0},"es-CL":{web:0},"es-CO":{web:0},"de-DE":{web:0,audio:132,image:350,news:351,directory:352,local:354,video:356,mobile:362,answers:1307,"answers-vertical":1317},"da-DK":{web:0},"es-US":{web:0,image:382,news:383,directory:385,video:387,answers:1307,"answers-vertical":1317},"es-ES":{web:0,image:302,news:303,directory:304,local:306,video:308,"movie-vertical":1308,"movie-web-backfill":1308,answers:1307,"answers-vertical":1317},"se-FI":{web:0},"sv-FI":{web:0},"fi-FI":{web:0},
"fr-FR":{web:0,image:318,news:319,directory:320,local:322,video:324,"movie-vertical":1308,"movie-web-backfill":1308,answers:1307,"answers-vertical":1317},"zh-Hant-HK":{web:0,blog:122,news:134,forum:135,image:147,audio:148,directory:149,knowledge:152,video:153,"shopping-vertical":1301,dictionary:1306},"id-ID":{web:0,image:467,news:468,audio:469,directory:470,video:472,answers:1307,"answers-vertical":1317},"en-IN":{web:0,image:426,news:427,directory:429,local:431,video:433,answers:1307,"answers-vertical":1317},
"it-IT":{web:0,image:366,news:367,directory:368,local:370,video:372,"movie-vertical":1308,"movie-web-backfill":1308,answers:1307,"answers-vertical":1317},"es-MX":{web:0,image:272,news:273,video:277,mobile:283,answers:1307,"answers-vertical":1317},"en-MY":{web:0,image:453,news:454,directory:456,video:458,blog:461,answers:1307,"answers-vertical":1317},"ms-MY":{web:0,image:453,news:454,directory:456,video:458,blog:461,answers:1307,"answers-vertical":1317},"nl-NL":{web:0},"se-NO":{web:0},"nb-NO":{web:0},
"nn-NO":{web:0},"en-NZ":{web:0,image:531,news:532,video:536,lifestyle:1201,sports:1202,finance:1203,movie:1204,"movie-web-backfill":1308,recipe:1205,answers:1307,"answers-vertical":1317},"qu-PE":{web:0},"es-PE":{web:0},"en-PH":{web:0,image:482,news:483,directory:485,video:487,answers:1307,"answers-vertical":1317},"ru-RU":{web:0},"tt-RU":{web:0},"se-SE":{web:0},"su-SE":{web:0},"en-SG":{web:0,image:216,news:217,directory:219,video:221,answers:1307,"answers-vertical":1317},"th-TH":{web:0,image:497,news:498,
video:502,answers:1307,"answers-vertical":1317},"zh-Hant-TW":{web:0,image:183,news:184,audio:185,directory:186,knowledge:189,video:190,blog:193,academia:195,mobile:197,wretch:548,"shopping-srp-vertical":1301,"shopping-mall-vertical":1302,"shopping-store-vertical":1303,"auction-vertical":1304,"service-vertical":1305,"shopping-category-vertical":1322,"shopping-store-category-vertical":1323,"auction-category-vertical":1324,dictionary:1306},"cy-GB":{web:0,audio:131,image:334,news:335,directory:336,local:338,
video:340,"movie-vertical":1308,"movie-web-backfill":1308,answers:1307,"answers-vertical":1317},"en-GB":{web:0,audio:131,image:334,news:335,directory:336,local:338,video:340,"movie-vertical":1308,"movie-web-backfill":1308,answers:1307,"answers-vertical":1317},"es-VE":{web:0},"vi-VN":{web:0,image:513,news:514,video:518,blog:521,answers:1307,"answers-vertical":1317}};q["zh-HK"]=q["zh-Hant-HK"];q["zh-TW"]=q["zh-Hant-TW"];k=function(){k.superclass.constructor.apply(this,arguments)};b.mix(k,{NAME:"SearchAssist",
ATTRS:{property:{value:"web",setter:function(a){return void 0===this.getPubId(a)?"web":a}},translation:{valueFn:function(){return n},setter:function(a){return b.mix(a,n),a}},pubid:{setter:function(a){return a},valueFn:function(){var a,b=this.get("property");return a=this.getPubId(b),"undefined"!==a?a:0}},ylt:{value:null},yltCustom:{value:null},action:{valueFn:function(){if(this.get("yltCustom")){var a,b=this.get("searchForm").getAttribute("action"),c=b.split(/[;\?]+/),d=/_ylt/gi;this.set("action",
b);for(a=0;a<c.length;a+=1)d.test(c[a])&&this.set("ylt",c[a]);return b}return""}},reverseHighlight:{value:!0},market:{value:"us"},dataSrc:{setter:function(a){if(!a.url)throw b.error("No url inside dataSrc config param");return b.log("dataSrc.url: "+a.url,"debug"),this.flushCache(),a},valueFn:function(){this._newProperty=this.get("property");var a=this.intlTheUrl();return b.log("valueFn"+a,"debug"),{url:a,params:null}}},baseUrl:{getter:function(){return this.get("dataSrc").url}},_externalDS:{valueFn:function(){return this.get("dataSrc").params?
this.get("dataSrc"):!1},getter:function(){return this.get("dataSrc").params?this.get("dataSrc"):!1}},_suggArrayParam:{value:"k"},quietMode:{value:!1,setter:function(a){return b.Lang.isBoolean(a)?a:void 0}},allowCache:{value:!1,setter:function(a){return b.Lang.isBoolean(a)?a:void 0}},cancelButton:{value:!1},maxSuggests:{value:4},searchBox:{initOnly:!0,setter:function(a){var c=b.one(a);return c||b.error("Invalid Search Box id specified"+a),"off"!==c.getAttribute("autocomplete")&&c.setAttribute("autocomplete",
"off"),c.setAttribute("autocorrect","off"),c.setAttribute("autocapitalize","off"),c.setStyles({"-webkit-tap-highlight-color":"transparent"}),c}},searchForm:{valueFn:function(){return this.get("searchBox").get("form")},setter:function(a){var c=b.one(a);return c||b.error("not a valid search form node"+a),c},getter:function(){return this.get("searchBox").get("form")}},preventFormSubmit:{value:!1},hostNodeToAttach:{setter:function(a){return b.one(a)?b.one(a):null}},fakeBox:{value:!1},fakeBoxNode:{getter:function(){return b.one("#fakeBox")}},
fakeBoxHintNode:{getter:function(){return b.one("#fakeBoxHint")}},searchBoxContainer:{valueFn:function(){var a,c=b.Node.create("<div></div>");return c.generateID(),a=this.get("hostNodeToAttach"),a||(a=this.get("searchForm")),a.append(c),c.addClass("sa-sbx-container"),c}},gossipParams:{value:{},setter:function(a){return a}},saFormWrapper:{valueFn:function(){return this.get("searchForm").wrap('<div class="search-assist-form-wrapper"></div>'),b.one(".search-assist-form-wrapper")}},saContainer:{valueFn:function(){var a=
b.Node.create("<div></div>");return a.generateID(),this.get("searchBoxContainer").append(a),a.addClass("sa"),this.get("reverseHighlight")&&a.addClass("lowlight"),a}},ieTillFive:{valueFn:function(){return 0<b.UA.ie&&6>b.UA.ie?!0:!1}},ieTillSix:{valueFn:function(){return 0<b.UA.ie&&7>b.UA.ie?!0:!1}},ieTillSeven:{valueFn:function(){return 0<b.UA.ie&&8>b.UA.ie?!0:!1}},ieTillEight:{valueFn:function(){return 0<b.UA.ie&&9>b.UA.ie?!0:!1}},allIe:{valueFn:function(){return 0<b.UA.ie?!0:!1}},gecko:{valueFn:function(){return 0<
b.UA.gecko?!0:!1}},mbxWrapperNode:{initOnly:!0,setter:function(a){return b.one(a)}},appId:{valueFn:function(){return b.config.win.location.hostname||"search.yahoo.com"},setter:function(a){return a}},exitScreenButton:{value:!1},sendBCookie:{value:!0,setter:function(a){return b.Lang.isBoolean(a)?a:void 0}},bcookie:{valueFn:function(){return encodeURIComponent(b.Cookie.get("B"))||encodeURIComponent(b.Cookie.get("BX"))||null}},smw:{lazyAdd:!1,setter:function(a){return a?(this._smwPlugged||(this._smwPlugged=
!0,this.plug(b.SEARCHASSIST.SmwSuggestionsPlugin)),b.mix(a,c),a):(this._smwPlugged=!1,this.unplug(b.SEARCHASSIST.SmwSuggestionsPlugin),!1)}},spellCheck:{value:!1,setter:function(a){return b.Lang.isBoolean(a)?a:void 0}},disableHighlight:{value:!1,setter:function(a){return b.Lang.isBoolean(a)?a:void 0}},spellCheckNode:{getter:function(){return b.one("#spellCheckBox")}},webHistory:{lazyAdd:!1,setter:function(c){return c?(!this._webHistoryPlugged&&c.highlightHistory&&(this._webHistoryPlugged=!0,this.plug(b.HistorySuggestionsPlugin)),
b.mix(c,a),c):(this._webHistoryPlugged=!1,this.unplug(b.HistorySuggestionsPlugin),!1)}},branding:{setter:function(a){return a?(b.mix(a,d),a):!1}},ariaPlug:{value:!1},renderMode:{value:"tray"},enableTrending:{value:!1,setter:function(a){return this._origETVal=a,a},getter:function(){return this.checkUrlSupportForEmptyQuery()&&this._origETVal}},enableTrendingTitle:{value:null},autoAlign:{value:!1},anyKeySearch:{value:!1},backspaceBehaviorNative:{value:!1},replaceQueryOnFocus:{value:!1},noSpaceOnFocus:{value:!1},
disablePlaceHolder:{value:!1,getter:function(){return this.get("device")[this.get("currentDevice")].disablePlaceHolder}},configPanel:{value:null},skin:{getter:function(){return this.get("device")[this.get("currentDevice")].skin}},currentDevice:{valueFn:function(){return b.UA.mobile?0<b.UA.iphone?"phone":"tablet":"desktop"},setter:function(a){return"phone"!==a&&"tablet"!==a&&"desktop"!==a?(b.log("invalid device type specified"+a+".device type has to be phone tablet or desktop","error"),"desktop"):
(!0===this.get("device")[a].expandMode&&this.createMobileWrapper(),a)}},mobileExpandMode:{value:!1,getter:function(){return this.get("device")[this.get("currentDevice")].expandMode}},device:{valueFn:function(){return t},setter:function(a){return b.mix(a,t),b.mix(a.phone,l),b.mix(a.desktop,h),b.mix(a.tablet,m),a}},ultEnabled:{setter:function(a){return b.Lang.isBoolean(a)?a:void 0},valueFn:function(){return!1}},ult:{setter:function(a){return b.mix(a,e),b.Lang.isString(a.spaceId)?a:e}},enableTruncation:{value:!1},
mobileAutoComplete:{value:!1},logAutoComplete:{value:!1},minKey:{setter:function(a){return b.Lang.isNumber(a)&&0<=a?a:(b.log("minKey can take numbers ranging [0, )","error"),0)},value:0},subAssist:{value:!1},lang:{value:"en-US",setter:function(a){return a}},https:{value:!1,setter:function(a){return a}},geo:{valueFn:function(){return f},setter:function(a){return b.mix(a,f),a}},extraUltParams:{value:{},setter:function(a){return b.Lang.isObject(a)?a:(b.log("erroneous ultExtraParams provided, make sure its an object",
"error"),{})}}}});b.SEARCHASSIST=b.extend(k,b.Base,{initializer:function(a){b.log("instantiating SearchAssist","debug",g);a=a||{};b.log("cfg-Obj:","debug",g);b.log(a,"debug");this._allSubscr={};this.get("ult")&&this.set("ultEnabled",!0);this.setDeviceClass();!0===this.get("mobileExpandMode")&&this.createMobileWrapper();!0===this._isCookieSetForSAActive()?this.set("quietMode",!1):this.set("quietMode",!0);this.on("quietModeChange",this.handleQuietModeChange);this.on("autoAlignChange",this.handleAutoAlignChange);
this.on("propertyChange",this.handlePropertyChange);this.after("langChange",this.handleLangChange);this.after("webHistoryChange",this.updateDataSrcUrl);this.after("httpsChange",this.updateDataSrcUrl);this.after("ultChange",this.setUltStatus);this._origProperty=this.get("property");this._newProperty=this.get("property")},setUltStatus:function(a){a.newVal?this.set("ultEnabled",!0):this.set("ultEnabled",!1)},setDeviceClass:function(){var a=this.get("currentDevice"),c=this.get("skin"),d=b.one("html");
d&&(d.removeClass("sa-device-phone"),d.removeClass("sa-device-tablet"),d.removeClass("sa-device-desktop"),d.addClass("sa-device-"+a),d.removeClass("sa-skin-phone"),d.removeClass("sa-skin-tablet"),d.removeClass("sa-skin-desktop"),d.addClass("sa-skin-"+c))},checkUrlSupportForEmptyQuery:function(){return this._urlSupportsTrending||this.get("dataSrc")&&this.get("dataSrc").supportsEmptyQuery?!0:!1},getDefaultSuggArrParam:function(){return"k"},_isCookieSetForSAActive:function(){var a=b.config.doc.cookie.match(/(?:^|\s*;\s*)SP=(?:[^&]*&)?a=(\d)(?:&|;)?/);
return a&&"0"===a[1]?!1:!0},_detachAllSubscriptions:function(){var a,c=this._allSubscr;if(c)for(a in c)c.hasOwnProperty(a)&&(b.log("detaching subscription: "+a,"debug",g),c[a].detach())},updateDataSrcUrl:function(){var a=this.intlTheUrl();a&&this.set("dataSrc",{url:a})},getPubIdForProp:function(a,c){var d=q[c];return d&&void 0!==d[a]?d[a]:(b.log("No PubId found for lang="+c+" and property="+a,"warn",g),0)},handleLangChange:function(a){this.updateDataSrcUrl(a);a=this.getPubIdForProp(this._newProperty,
this.get("lang"));this.set("pubid",a)},handlePropertyChange:function(a){a=a.newVal;var c=this.getPubId(a);void 0!==c?(this.set("pubid",c),this.flushCache()):(c=this.getPubId(this._origProperty),b.log("no Pubid for the given property:"+a,"warn",g),b.log("defaulting to pubid for original property:"+this._origProperty,"warn",g),void 0!==c?(this.set("pubid",c),this.flushCache()):(b.log("defaulting to pubid0","warn",g),this.set("pubid",0)));this._newProperty=a;this.handleLangChange()},handleAutoAlignChange:function(a){a=
a.newVal;var c=this._allSubscr;!1===a&&(b.log("autoAlign has been set to false.. deregistering it","debug"),this.alignTrayDeregisteration());!0===a&&(b.log("autoAlign has been set to true.. reregistering it","debug"),c&&!c._autoAlignRegistered&&this.alignTrayRegisteration())},handleQuietModeChange:function(a){a=a.newVal;!1!==a||this._initDone||(this._initDone=!0,b.log("reattach all subscriptions","debug",g),this.coreInit(),this.clientInit(),this.navInit(),this.trayInit());!0===a&&(b.log("detach all subscriptions",
g),this.closeTray(),this._detachAllSubscriptions(),this._initDone=!1)},isTrendingEnabled:function(){return this.get("enableTrending")},isTrendingTitleEnabled:function(){return this.get("enableTrendingTitle")},createMobileWrapper:function(){b.one(".mobile-expand-sbx-wrapper")||(this.get("searchBox").wrap('<div class="mobile-expand-sbx-wrapper"></div'),this.set("mbxWrapperNode",".mobile-expand-sbx-wrapper"))},getPubId:function(a){var c=this.get("lang"),d=q[c];return d&&"undefined"!==d[a]?d[a]:(b.log("no valid pubid found for lang="+
c+"property="+a,"warn",g),b.log("using default pubid","warn",g),0)},intlTheUrl:function(){return this.setMarket(),this.langifySuggestUrl()},langifySuggestUrl:function(){var a,c,d=this.get("lang"),e=this.get("market"),f=this._newProperty;switch(f&&(f=f.toLowerCase()),c="http"+(!0===this.get("https")?"s":""),a=c+"://"+e+".search.yahoo.com/sugg/gossip/gossip-"+("malaysia"===e?"my":e),this._urlSupportsTrending=!1,d){case "en-US":switch(a=c+"://search.yahoo.com/sugg/",f){case "web":a+="gossip/gossip-us-ura";
this._urlSupportsTrending=!0;break;case "sports":case "image":case "news":case "directory":case "video":case "audio":case "shine":case "omg":case "games":case "finance":a+="ss/gossip-us_ss";break;case "autos-vertical":case "movie-vertical":case "shopping-vertical":case "dictionary":a+="gossip/gossip-us-vertical_ss";break;case "answers-vertical":case "answers":a+="ss/gossip-us_ss-vertical_ss";break;case "autos-related":a+="gossip/gossip-us-seaview";break;case "autos-also-try":a+="gossip/gossip-us-falcon";
break;case "music-web-backfill":a+="gossip/gossip-us-uh";break;case "movie-web-backfill":a+="gossip/gossip-us-uh_ss";break;default:a+="gossip/gossip-us-ura",this._urlSupportsTrending=!0}break;case "es-AR":case "pt-BR":case "de-DE":case "id-ID":case "en-IN":case "es-MX":case "en-MY":case "ms-MY":case "en-PH":case "en-SG":case "th-TH":case "vi-VN":"answers"!==f&&"answers-vertical"!==f||(a+="-vertical_ss");break;case "fr-CA":a=c+"://"+e+".search.yahoo.com/sugg/gossip/gossip-ca_fr";"answers"!==f&&"answers-vertical"!==
f||(a+="-vertical_ss");break;case "en-AU":case "en-CA":case "es-ES":case "fr-FR":case "it-IT":"movie-vertical"!==f&&"answers"!==f&&"answers-vertical"!==f||(a+="-vertical_ss");"movie-web-backfill"===f&&(a+="-uh_ss");break;case "en-NZ":"answers"!==f&&"answers-vertical"!==f||(a+="-vertical_ss");"movie-web-backfill"===f&&(a+="-uh_ss");break;case "zh-HK":case "zh-Hant-HK":switch(f){case "web":a+="-ura";this._urlSupportsTrending=!0;break;case "dictionary":case "shopping-vertical":a+="-vertical_ss"}break;
case "zh-TW":case "zh-Hant-TW":switch(f){case "web":a+="-ura";this._urlSupportsTrending=!0;break;case "dictionary":case "shopping-srp-vertical":case "shopping-mall-vertical":case "shopping-store-vertical":case "auction-vertical":case "service-vertical":case "shopping-category-vertical":case "shopping-store-category-vertical":case "auction-category-vertical":a+="-vertical_ss"}break;case "en-GB":case "cy-GB":switch(f){case "web":a+="-ura";this._urlSupportsTrending=!0;break;case "movie-vertical":case "answers":case "answers-vertical":a+=
"-vertical_ss";break;case "movie-web-backfill":a+="-uh_ss"}break;case "es-US":a=c+"://"+e+".search.yahoo.com/sugg/gossip/gossip-e1";"answers"!==f&&"answers-vertical"!==f||(a+="-vertical_ss");break;default:b.log("default case, no special url treatment for this property and language","info")}return b.log("gossip url:"+a,"debug",g),a+"/"},setMarket:function(){var a=this.get("lang"),c=a.split("-"),d="",e=c.length;b.Lang.isArray(c)&&0<e&&c[e-1]&&(d=c[e-1]);"fr-CA"===a&&(d="QC");"en-GB"!==a&&"cy-GB"!==
a||(d="UK");"es-US"===a&&(d="ESPANOL");"en-MY"!==a&&"ms-MY"!==a||(d="MALAYSIA");p[d]||(b.log("invalid market:"+d,"warn",g),b.log("available markets:"+p,"warn"),!1)||(d="us");this.set("market",d.toLowerCase())}})},"0.0.1",{requires:["base","cookie","intl"]});
